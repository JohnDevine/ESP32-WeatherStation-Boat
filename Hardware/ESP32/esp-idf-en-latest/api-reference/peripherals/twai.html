<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-73KGWFC8DM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-73KGWFC8DM');
        </script><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Two-Wire Automotive Interface (TWAI) - ESP32 -  &mdash; ESP-IDF Programming Guide latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=851bd809" />
      <link rel="stylesheet" type="text/css" href="../../_static/js/chatbot_widget.css?v=3106ea3a" />

  
    <link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/peripherals/twai.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=becddca3"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ff8fa330"></script>
        <script src="https://wavedrom.com/skins/default.js"></script>
        <script src="https://wavedrom.com/wavedrom.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../_static/js/chatbot_widget_en.js?v=63d6728d"></script>
    <script src="../../_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'api-reference/peripherals/twai';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-idf';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en", "zh_CN"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32s3", "esp32c3", "esp32c2", "esp32c5", "esp32c6", "esp32p4"]
        DOCUMENTATION_OPTIONS.RELEASE = 'latest';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Universal Asynchronous Receiver/Transmitter (UART)" href="uart.html" />
    <link rel="prev" title="Capacitive Touch Sensor" href="cap_touch_sens.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ESP-IDF Programming Guide
              <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-conventions.html">API Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Application Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth<sup>Â®</sup> API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Peripherals API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adc/index.html">Analog to Digital Converter (ADC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="clk_tree.html">Clock Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="dac.html">Digital To Analog Converter (DAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpio.html">GPIO &amp; RTC GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="gptimer.html">General Purpose Timer (GPTimer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c.html">Inter-Integrated Circuit (I2C)</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2s.html">Inter-IC Sound (I2S)</a></li>
<li class="toctree-l3"><a class="reference internal" href="lcd/index.html">LCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="ledc.html">LED Control (LEDC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mcpwm.html">Motor Control Pulse Width Modulator (MCPWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcnt.html">Pulse Counter (PCNT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rmt.html">Remote Control Transceiver (RMT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="sd_pullup_requirements.html">SD Pull-up Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdmmc_host.html">SDMMC Host Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdspi_host.html">SD SPI Host Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdio_slave.html">SDIO Card Slave Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdm.html">Sigma-Delta Modulation (SDM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_flash/index.html">SPI Flash API</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_master.html">SPI Master Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_slave.html">SPI Slave Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="cap_touch_sens.html">Capacitive Touch Sensor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Two-Wire Automotive Interface (TWAI)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-features">Advanced Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-examples">Application Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="uart.html">Universal Asynchronous Receiver/Transmitter (UART)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig-reference.html">Configuration Options Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">Hardware Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration-guides/index.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributions Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ESP-IDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights and Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">Switch Between Languages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="index.html">Peripherals API</a></li>
      <li class="breadcrumb-item active">Two-Wire Automotive Interface (TWAI)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/espressif/esp-idf/blob/758939ca/docs/en/api-reference/peripherals/twai.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="two-wire-automotive-interface-twai">
<h1>Two-Wire Automotive Interface (TWAI)<a class="headerlink" href="#two-wire-automotive-interface-twai" title="Permalink to this heading">ï</a></h1>
<p><a class="reference external" href="../../../../../zh_CN/latest/esp32/api-reference/peripherals/twai.html">[ä¸­æ]</a></p>
<p>This document introduces the features of the Two-Wire Automotive Interface (TWAI) controller driver in ESP-IDF. The chapter structure is as follows:</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id9">Overview</a></p></li>
<li><p><a class="reference internal" href="#getting-started" id="id10">Getting Started</a></p>
<ul>
<li><p><a class="reference internal" href="#hardware-connection" id="id11">Hardware Connection</a></p></li>
<li><p><a class="reference internal" href="#creating-and-starting-a-twai-node" id="id12">Creating and Starting a TWAI Node</a></p></li>
<li><p><a class="reference internal" href="#transmitting-messages" id="id13">Transmitting Messages</a></p></li>
<li><p><a class="reference internal" href="#receiving-messages" id="id14">Receiving Messages</a></p></li>
<li><p><a class="reference internal" href="#stopping-and-deleting-the-node" id="id15">Stopping and Deleting the Node</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-features" id="id16">Advanced Features</a></p>
<ul>
<li><p><a class="reference internal" href="#bit-timing-customization" id="id17">Bit Timing Customization</a></p></li>
<li><p><a class="reference internal" href="#filter-configuration" id="id18">Filter Configuration</a></p></li>
<li><p><a class="reference internal" href="#bus-errors-and-recovery" id="id19">Bus Errors and Recovery</a></p></li>
<li><p><a class="reference internal" href="#power-management" id="id20">Power Management</a></p></li>
<li><p><a class="reference internal" href="#cache-safety" id="id21">Cache Safety</a></p></li>
<li><p><a class="reference internal" href="#thread-safety" id="id22">Thread Safety</a></p></li>
<li><p><a class="reference internal" href="#performance" id="id23">Performance</a></p></li>
<li><p><a class="reference internal" href="#resource-usage" id="id24">Resource Usage</a></p></li>
<li><p><a class="reference internal" href="#other-kconfig-options" id="id25">Other Kconfig Options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#application-examples" id="id26">Application Examples</a></p></li>
<li><p><a class="reference internal" href="#api-reference" id="id27">API Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#header-file" id="id28">Header File</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id29">Functions</a></p></li>
<li><p><a class="reference internal" href="#structures" id="id30">Structures</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id31">Header File</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id32">Functions</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id33">Header File</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id34">Structures</a></p></li>
<li><p><a class="reference internal" href="#type-definitions" id="id35">Type Definitions</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id36">Header File</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id37">Functions</a></p></li>
<li><p><a class="reference internal" href="#unions" id="id38">Unions</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id39">Structures</a></p></li>
<li><p><a class="reference internal" href="#macros" id="id40">Macros</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id41">Type Definitions</a></p></li>
<li><p><a class="reference internal" href="#enumerations" id="id42">Enumerations</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">ï</a></h2>
<p>TWAI is a highly reliable, multi-master, real-time, serial asynchronous communication protocol designed for automotive and industrial applications. It is compatible with the frame structure defined in the ISO 11898-1 standard and supports both standard frames with 11-bit identifiers and extended frames with 29-bit identifiers. The protocol supports message prioritization with lossless arbitration, automatic retransmission, and fault confinement mechanisms. The ESP32 includes 1 TWAI controllers, allowing for the creation of 1 driver instances.</p>
<p>The TWAI controllers on the ESP32 are <strong>not compatible with FD format frames and will interpret such frames as errors.</strong></p>
<p>Thanks to its hardware-based fault tolerance and multi-master architecture, the TWAI driver is ideal for scenarios such as:</p>
<ul class="simple">
<li><p>Serving as a robust communication bus in environments with significant electrical noise</p></li>
<li><p>Enabling long-distance communication across multiple sensors/actuators with resilience to single-node failures</p></li>
<li><p>Building decentralized distributed local networks that avoid the unpredictability of single-master designs</p></li>
<li><p>Acting as a bridging node alongside other communication protocols</p></li>
</ul>
</section>
<section id="getting-started">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this heading">ï</a></h2>
<p>This section provides a quick overview of how to use the TWAI driver. Through simple examples, it demonstrates how to create a TWAI node instance, transmit and receive messages on the bus, and safely stop and uninstall the driver. The general usage flow is as follows:</p>
<img alt="../../_images/base_flow.drawio.svg" class="align-center" src="../../_images/base_flow.drawio.svg" /><section id="hardware-connection">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Hardware Connection</a><a class="headerlink" href="#hardware-connection" title="Permalink to this heading">ï</a></h3>
<p>The ESP32 does not integrate an internal TWAI transceiver. Therefore, an external transceiver is required to connect to a TWAI bus. The model of the external transceiver depends on the physical layer standard used in your specific application. For example, a TJA105x transceiver can be used to comply with the ISO 11898-2 standard.</p>
<img alt="ESP32 to Transceiver Wiring" class="align-center" src="../../_images/hw_connection.svg" /><p>Specifically:</p>
<ul class="simple">
<li><p>For single-node testing, you can directly short the TX and RX pins to omit the transceiver.</p></li>
<li><p>BUS_OFF (optional): Outputs a low logic level (0â¯V) when the TWAI controller enters the bus-off state. Otherwise, it remains at a high logic level (3.3â¯V).</p></li>
<li><p>CLK_OUT (optional): Outputs the time quantum clock of the controller, which is a divided version of the source clock.</p></li>
</ul>
</section>
<section id="creating-and-starting-a-twai-node">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Creating and Starting a TWAI Node</a><a class="headerlink" href="#creating-and-starting-a-twai-node" title="Permalink to this heading">ï</a></h3>
<p>First, we need to create a TWAI instance. The following code demonstrates how to create a TWAI node with a baud rate of 200â¯kHz:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_twai.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_twai_onchip.h&quot;</span>

<span class="n">twai_node_handle_t</span><span class="w"> </span><span class="n">node_hdl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">twai_onchip_node_config_t</span><span class="w"> </span><span class="n">node_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">io_cfg</span><span class="p">.</span><span class="n">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">             </span><span class="c1">// TWAI TX GPIO pin</span>
<span class="w">    </span><span class="p">.</span><span class="n">io_cfg</span><span class="p">.</span><span class="n">rx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">             </span><span class="c1">// TWAI RX GPIO pin</span>
<span class="w">    </span><span class="p">.</span><span class="n">bit_timing</span><span class="p">.</span><span class="n">bitrate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">  </span><span class="c1">// 200 kbps bitrate</span>
<span class="w">    </span><span class="p">.</span><span class="n">tx_queue_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">        </span><span class="c1">// Transmit queue depth set to 5</span>
<span class="p">};</span>
<span class="c1">// Create a new TWAI controller driver instance</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_new_node_onchip</span><span class="p">(</span><span class="o">&amp;</span><span class="n">node_config</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">node_hdl</span><span class="p">));</span>
<span class="c1">// Start the TWAI controller</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_enable</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">));</span>
</pre></div>
</div>
<p>When creating a TWAI instance, you must configure parameters such as GPIO pins and baud rate using the <a class="reference internal" href="#_CPPv425twai_onchip_node_config_t" title="twai_onchip_node_config_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_onchip_node_config_t</span></code></a> structure. These parameters determine how the TWAI node operates. Then, you can call the <a class="reference internal" href="#_CPPv420twai_new_node_onchipPK25twai_onchip_node_config_tP18twai_node_handle_t" title="twai_new_node_onchip"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_new_node_onchip()</span></code></a> function to create a new TWAI instance. This function returns a handle to the newly created instance. A TWAI handle is essentially a pointer to an internal TWAI memory object of type <a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_node_handle_t</span></code></a>.</p>
<p>Below are additional configuration fields of the <a class="reference internal" href="#_CPPv425twai_onchip_node_config_t" title="twai_onchip_node_config_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_onchip_node_config_t</span></code></a> structure along with their descriptions:</p>
<ul>
<li><p><a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t7clk_srcE" title="twai_onchip_node_config_t::clk_src"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::clk_src</span></code></a>: Specifies the clock source used by the controller. Supported sources are listed in <a class="reference internal" href="#_CPPv419twai_clock_source_t" title="twai_clock_source_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_clock_source_t</span></code></a>.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::bit_timing::sp_permill</span></code>: Specifies the location of the sample point. ssp_permill sets the location of the secondary sample point and can be used to fine-tune timing in low SNR conditions.</p></li>
<li><p><a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t11data_timingE" title="twai_onchip_node_config_t::data_timing"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::data_timing</span></code></a>: Specifies the baud rate and sample point for the data phase in FD frames. This field is ignored if the controller does not support FD format.</p></li>
<li><p><a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t14fail_retry_cntE" title="twai_onchip_node_config_t::fail_retry_cnt"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::fail_retry_cnt</span></code></a>: Sets the number of retry attempts on transmission failure. -1 indicates infinite retries until success or bus-off; 0 disables retries (single-shot mode); 1 retries once, and so on.</p></li>
<li><p><a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t13intr_priorityE" title="twai_onchip_node_config_t::intr_priority"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::intr_priority</span></code></a>: Interrupt priority in the range [0:3], where higher values indicate higher priority.</p></li>
<li><p><a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t5flagsE" title="twai_onchip_node_config_t::flags"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::flags</span></code></a>: A set of flags for fine-tuning driver behavior. Options include:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::flags::enable_self_test</span></code>: Enables self-test mode. In this mode, ACK is not checked during transmission, which is useful for single-node testing.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::flags::enable_loopback</span></code>: Enables loopback mode. The node will receive its own transmitted messages (subject to filter configuration), while also transmitting them to the bus.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::flags::enable_listen_only</span></code>: Configures the node in listen-only mode. In this mode, the node only receives and does not transmit any dominant bits, including ACK and error frames.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::flags::no_receive_rtr</span></code>: When using filters, determines whether remote frames matching the ID pattern should be filtered out.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The <a class="reference internal" href="#_CPPv416twai_node_enable18twai_node_handle_t" title="twai_node_enable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_enable()</span></code></a> function starts the TWAI controller. Once enabled, the controller is connected to the bus and can transmit messages. It also generates events upon receiving messages from other nodes on the bus or when bus errors are detected.</p>
<p>The corresponding function, <a class="reference internal" href="#_CPPv417twai_node_disable18twai_node_handle_t" title="twai_node_disable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_disable()</span></code></a>, immediately stops the node and disconnects it from the bus. Any ongoing transmissions will be aborted. When the node is re-enabled later, if there are pending transmissions in the queue, the driver will immediately initiate a new transmission attempt.</p>
</section>
<section id="transmitting-messages">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Transmitting Messages</a><a class="headerlink" href="#transmitting-messages" title="Permalink to this heading">ï</a></h3>
<p>TWAI messages come in various types, which are specified by their headers. A typical data frame consists primarily of a header and data payload, with a structure similar to the following:</p>
<img alt="../../_images/frame_struct.svg" class="align-center" src="../../_images/frame_struct.svg" /><p>To reduce performance overhead caused by memory copying, the TWAI driver uses pointers to pass messages. The following code demonstrates how to transmit a typical data frame:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">send_buff</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n">twai_frame_t</span><span class="w"> </span><span class="n">tx_msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1</span><span class="p">,</span><span class="w">           </span><span class="c1">// Message ID</span>
<span class="w">    </span><span class="p">.</span><span class="n">header</span><span class="p">.</span><span class="n">ide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w">         </span><span class="c1">// Use 29-bit extended ID format</span>
<span class="w">    </span><span class="p">.</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">send_buff</span><span class="p">,</span><span class="w">        </span><span class="c1">// Pointer to data to transmit</span>
<span class="w">    </span><span class="p">.</span><span class="n">buffer_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">send_buff</span><span class="p">),</span><span class="w">  </span><span class="c1">// Length of data to transmit</span>
<span class="p">};</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_transmit</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tx_msg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w">  </span><span class="c1">// Timeout = 0: returns immediately if queue is full</span>
</pre></div>
</div>
<p>In this example, <code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::id</span></code> specifies the ID of the message as 0x01. Message IDs are typically used to indicate the type of message in an application and also play a role in bus arbitration during transmissionâlower values indicate higher priority on the bus. <a class="reference internal" href="#_CPPv4N12twai_frame_t6bufferE" title="twai_frame_t::buffer"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::buffer</span></code></a> points to the memory address where the data to be transmitted is stored, and <a class="reference internal" href="#_CPPv4N12twai_frame_t10buffer_lenE" title="twai_frame_t::buffer_len"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::buffer_len</span></code></a> specifies the length of that data.</p>
<p>Note that <code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::dlc</span></code> can also specify the length of the data in the frame. The DLC (Data Length Code) is mapped to the actual data length as defined in ISO 11898-1. You can use either <a class="reference internal" href="#_CPPv414twaifd_dlc2len8uint16_t" title="twaifd_dlc2len"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twaifd_dlc2len()</span></code></a> or <a class="reference internal" href="#_CPPv414twaifd_len2dlc8uint16_t" title="twaifd_len2dlc"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twaifd_len2dlc()</span></code></a> for conversion. If both dlc and buffer_len are non-zero, they must represent the same length.</p>
<p>The <a class="reference internal" href="#_CPPv412twai_frame_t" title="twai_frame_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_frame_t</span></code></a> message structure also includes other configuration fields:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::dlc</span></code>: Data Length Code. For classic frames, values [0:8] represent lengths [0:8]; for FD format, values [0:15] represent lengths up to 64 bytes.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::ide</span></code>: Indicates use of a 29-bit extended ID format.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::rtr</span></code>: Indicates the frame is a remote frame, which contains no data payload.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::fdf</span></code>: Marks the frame as an FD format frame, supporting up to 64 bytes of data.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::brs</span></code>: Enables use of a separate data-phase baud rate when transmitting.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::header::esi</span></code>: For received frames, indicates the error state of the transmitting node.</p></li>
</ul>
</section>
<section id="receiving-messages">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Receiving Messages</a><a class="headerlink" href="#receiving-messages" title="Permalink to this heading">ï</a></h3>
<p>Receiving messages must be done within a receive event callback. Therefore, to receive messages, you need to register a receive event callback via <a class="reference internal" href="#_CPPv4N22twai_event_callbacks_t10on_rx_doneE" title="twai_event_callbacks_t::on_rx_done"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_event_callbacks_t::on_rx_done</span></code></a> before starting the controller. This enables the controller to deliver received messages via the callback when events occur. The following code snippets demonstrate how to register the receive event callback and how to handle message reception inside the callback:</p>
<p>Registering the receive event callback (before starting the controller):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">twai_event_callbacks_t</span><span class="w"> </span><span class="n">user_cbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">on_rx_done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">twai_rx_cb</span><span class="p">,</span>
<span class="p">};</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_register_event_callbacks</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">user_cbs</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">));</span>
</pre></div>
</div>
<p>Receiving messages inside the callback:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">twai_rx_cb</span><span class="p">(</span><span class="n">twai_node_handle_t</span><span class="w"> </span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">twai_rx_done_event_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">edata</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_ctx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">recv_buff</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="w">    </span><span class="n">twai_frame_t</span><span class="w"> </span><span class="n">rx_frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">recv_buff</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">buffer_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">recv_buff</span><span class="p">),</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ESP_OK</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">twai_node_receive_from_isr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rx_frame</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// receive ok, do something here</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similarly, since the driver uses pointers for message passing, you must configure the pointer <a class="reference internal" href="#_CPPv4N12twai_frame_t6bufferE" title="twai_frame_t::buffer"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::buffer</span></code></a> and its memory length <a class="reference internal" href="#_CPPv4N12twai_frame_t10buffer_lenE" title="twai_frame_t::buffer_len"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_frame_t::buffer_len</span></code></a> before receiving.</p>
</section>
<section id="stopping-and-deleting-the-node">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Stopping and Deleting the Node</a><a class="headerlink" href="#stopping-and-deleting-the-node" title="Permalink to this heading">ï</a></h3>
<p>When the TWAI node is no longer needed, you should call <a class="reference internal" href="#_CPPv416twai_node_delete18twai_node_handle_t" title="twai_node_delete"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_delete()</span></code></a> to release software and hardware resources. Make sure the TWAI controller is stopped before deleting the node.</p>
</section>
</section>
<section id="advanced-features">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Advanced Features</a><a class="headerlink" href="#advanced-features" title="Permalink to this heading">ï</a></h2>
<p>After understanding the basic usage, you can further explore more advanced capabilities of the TWAI driver. The driver supports more detailed controller configuration and error feedback features. The complete driver feature diagram is shown below:</p>
<img alt="../../_images/full_flow.drawio.svg" class="align-center" src="../../_images/full_flow.drawio.svg" /><section id="bit-timing-customization">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Bit Timing Customization</a><a class="headerlink" href="#bit-timing-customization" title="Permalink to this heading">ï</a></h3>
<p>Unlike other asynchronous communication protocols, the TWAI controller performs counting and sampling within one bit time in units of <strong>Time Quanta (Tq)</strong>. The number of time quanta per bit determines the final baud rate and the sample point position. When signal quality is poor, you can manually fine-tune these timing segments to meet specific requirements. The time quanta within a bit time are divided into different segments, as illustrated below:</p>
<img alt="Bit timing configuration" class="align-center" src="../../_images/bit_timing.svg" /><p>The synchronization segment (sync) is fixed at 1 Tq. The sample point lies between time segments tseg1 and tseg2. The Synchronization Jump Width (SJW) defines the maximum number of time quanta by which a bit time can be lengthened or shortened for synchronization purposes, ranging from [1 : tseg2]. The clock source divided by the baud rate prescaler (BRP) equals the time quantum. The total sum of all segments equals one bit time. Therefore, the following formula applies:</p>
<ul class="simple">
<li><p>Baud rate (bitrate):</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\text{bitrate} = \frac{f_{\text{src}}}{\text{brp} \cdot (1 + \text{prop_seg} + \text{tseg}_1 + \text{tseg}_2)}\]</div>
<ul class="simple">
<li><p>Sample point:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\text{sample_point} = \frac{1 + \text{prop_seg} + \text{tseg}_1}{1 + \text{prop_seg} + \text{tseg}_1 + \text{tseg}_2}\]</div>
<p>The following code demonstrates how to configure a baud rate of 500 Kbit/s with a sample point at 75% when using an 80 MHz clock source:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">twai_timing_advanced_config_t</span><span class="w"> </span><span class="n">timing_cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">brp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">       </span><span class="c1">// Prescaler set to 8, time quantum = 80M / 8 = 10 MHz (10M Tq)</span>
<span class="w">    </span><span class="p">.</span><span class="n">prop_seg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="c1">// Propagation segment</span>
<span class="w">    </span><span class="p">.</span><span class="n">tseg_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">    </span><span class="c1">// Phase segment 1</span>
<span class="w">    </span><span class="p">.</span><span class="n">tseg_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">    </span><span class="c1">// Phase segment 2</span>
<span class="w">    </span><span class="p">.</span><span class="n">sjw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">       </span><span class="c1">// Synchronization Jump Width</span>
<span class="p">};</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_reconfig_timing</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timing_cfg</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">));</span><span class="w"> </span><span class="c1">// Configure arbitration phase timing; NULL means FD data phase timing is not configured</span>
</pre></div>
</div>
<p>When manually configuring these timing segments, it is important to pay attention to the supported range of each segment according to the specific hardware. The timing configuration function <a class="reference internal" href="#_CPPv425twai_node_reconfig_timing18twai_node_handle_tPK29twai_timing_advanced_config_tPK29twai_timing_advanced_config_t" title="twai_node_reconfig_timing"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_reconfig_timing()</span></code></a> can configure the timing parameters for both the arbitration phase and the FD data phase either simultaneously or separately. When the controller does not support FD format, the data phase configuration is ignored. The timing parameter struct <a class="reference internal" href="#_CPPv429twai_timing_advanced_config_t" title="twai_timing_advanced_config_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">twai_timing_advanced_config_t</span></code></a> also includes the following additional configuration fields:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_timing_advanced_config_t::clk_src</span></code> â The clock source.</p></li>
<li><p><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_timing_advanced_config_t::ssp_offset</span></code> â The number of time quanta by which the secondary sample point (SSP) is offset relative to the synchronization segment.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Different combinations of <code class="docutils literal notranslate"><span class="pre">brp</span></code>, <code class="docutils literal notranslate"><span class="pre">prop_seg</span></code>, <code class="docutils literal notranslate"><span class="pre">tseg_1</span></code>, <code class="docutils literal notranslate"><span class="pre">tseg_2</span></code>, and <code class="docutils literal notranslate"><span class="pre">sjw</span></code> can achieve the same baud rate. Users should consider factors such as <strong>propagation delay, node processing time, and phase errors</strong>, and adjust the timing parameters based on the physical characteristics of the bus.</p>
</div>
</section>
<section id="filter-configuration">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Filter Configuration</a><a class="headerlink" href="#filter-configuration" title="Permalink to this heading">ï</a></h3>
<section id="mask-filters">
<h4>Mask Filters<a class="headerlink" href="#mask-filters" title="Permalink to this heading">ï</a></h4>
<p>The TWAI controller hardware can filter messages based on their ID to reduce software and hardware overhead, thereby improving node efficiency. Nodes that filter out certain messages will <strong>not receive those messages, but will still send acknowledgments (ACKs)</strong>.</p>
<p>ESP32 includes 1 mask filters. A message passing through any one of these filters will be received by the node. A typical TWAI mask filter is configured with an ID and a MASK, where:</p>
<ul>
<li><p>ID: represents the expected message ID, either the standard 11-bit or extended 29-bit format.</p></li>
<li><p>MASK: defines the filtering rules for each bit of the ID:</p>
<blockquote>
<div><ul class="simple">
<li><p>'0' means the corresponding bit is ignored (any value passes).</p></li>
<li><p>'1' means the corresponding bit must match exactly to pass.</p></li>
<li><p>When both ID and MASK are <cite>0</cite>, the filter ignores all bits and accepts all frames.</p></li>
<li><p>When both ID and MASK are set to the maximum <cite>0xFFFFFFFF</cite>, the filter accepts no frames.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The following code demonstrates how to calculate the MASK and configure a filter:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">twai_mask_filter_config_t</span><span class="w"> </span><span class="n">mfilter_cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span><span class="w">         </span><span class="c1">// 0b 000 0001 0000</span>
<span class="w">    </span><span class="p">.</span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x7f0</span><span class="p">,</span><span class="w">      </span><span class="c1">// 0b 111 1111 0000 â the upper 7 bits must match strictly, the lower 4 bits are ignored, accepts IDs of the form</span>
<span class="w">                        </span><span class="c1">// 0b 000 0001 xxxx (hex 0x01x)</span>
<span class="w">    </span><span class="p">.</span><span class="n">is_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w">    </span><span class="c1">// Accept only standard IDs, not extended IDs</span>
<span class="p">};</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_config_mask_filter</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mfilter_cfg</span><span class="p">));</span><span class="w">   </span><span class="c1">// Configure on filter 0</span>
</pre></div>
</div>
</section>
<section id="dual-filter-mode">
<h4>Dual Filter Mode<a class="headerlink" href="#dual-filter-mode" title="Permalink to this heading">ï</a></h4>
<p>ESP32 supports dual filter mode, which allows the hardware to be configured as two parallel independent 16-bit mask filters. By enabling this, more IDs can be received. Note that using dual filter mode to filter 29-bit extended IDs, each filter can only filter the upper 16 bits of the ID, while the remaining 13 bits are not filtered. The following code demonstrates how to configure dual filter mode using the function <a class="reference internal" href="#_CPPv421twai_make_dual_filter8uint16_t8uint16_t8uint16_t8uint16_tb" title="twai_make_dual_filter"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_make_dual_filter()</span></code></a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// filter 1 id/mask 0x020, 0x7f0, receive only std id 0x02x</span>
<span class="c1">// filter 2 id/mask 0x013, 0x7f8, receive only std id 0x010~0x017</span>
<span class="n">twai_mask_filter_config_t</span><span class="w"> </span><span class="n">dual_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">twai_make_dual_filter</span><span class="p">(</span><span class="mh">0x020</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7f0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x013</span><span class="p">,</span><span class="w"> </span><span class="mh">0x7f8</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// id1, mask1, id2, mask2, no extend ID</span>
<span class="n">ESP_ERROR_CHECK</span><span class="p">(</span><span class="n">twai_node_config_mask_filter</span><span class="p">(</span><span class="n">node_hdl</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dual_config</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
<section id="bus-errors-and-recovery">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Bus Errors and Recovery</a><a class="headerlink" href="#bus-errors-and-recovery" title="Permalink to this heading">ï</a></h3>
<p>The TWAI controller can detect errors caused by bus interference or corrupted frames that do not conform to the frame format. It implements a fault isolation mechanism using transmit and receive error counters (TEC and REC). The values of these counters determine the node's error state: Error Active, Error Warning, Error Passive, and Bus Off. This mechanism ensures that nodes with persistent errors eventually disconnect themselves from the bus.</p>
<ul class="simple">
<li><p><strong>Error Active</strong>: When both TEC and REC are less than 96, the node is in the active error state, meaning normal operation. The node participates in bus communication and sends <strong>active error flags</strong> when errors are detected to actively report them.</p></li>
<li><p><strong>Error Warning</strong>: When either TEC or REC is greater than or equal to 96 but both are less than 128, the node is in the warning error state. Errors may exist but the node behavior remains unchanged.</p></li>
<li><p><strong>Error Passive</strong>: When either TEC or REC is greater than or equal to 128, the node enters the passive error state. It can still communicate on the bus but sends only one <strong>passive error flag</strong> when detecting errors.</p></li>
<li><p><strong>Bus Off</strong>: When <strong>TEC</strong> is greater than or equal to 256, the node enters the bus off (offline) state. The node is effectively disconnected and does not affect the bus. It remains offline until recovery is triggered by software.</p></li>
</ul>
<p>Software can retrieve the node status anytime via the function <a class="reference internal" href="#_CPPv418twai_node_get_info18twai_node_handle_tP18twai_node_status_tP18twai_node_record_t" title="twai_node_get_info"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_get_info()</span></code></a>. When the controller detects errors, it triggers the <a class="reference internal" href="#_CPPv4N22twai_event_callbacks_t8on_errorE" title="twai_event_callbacks_t::on_error"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_event_callbacks_t::on_error</span></code></a> callback, where the error data provides detailed information.</p>
<p>When the nodeâs error state changes, the <a class="reference internal" href="#_CPPv4N22twai_event_callbacks_t15on_state_changeE" title="twai_event_callbacks_t::on_state_change"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_event_callbacks_t::on_state_change</span></code></a> callback is triggered, allowing the application to respond to the state transition. If the node is offline and needs recovery, call <a class="reference internal" href="#_CPPv417twai_node_recover18twai_node_handle_t" title="twai_node_recover"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_recover()</span></code></a> from a task context. <strong>Note that recovery is not immediate; the controller will automatically reconnect to the bus only after detecting 129 consecutive recessive bits (11 bits each).</strong></p>
<p>When recovery completes, the <a class="reference internal" href="#_CPPv4N22twai_event_callbacks_t15on_state_changeE" title="twai_event_callbacks_t::on_state_change"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_event_callbacks_t::on_state_change</span></code></a> callback will be triggered again, the node changes its state from <a class="reference internal" href="#_CPPv4N18twai_error_state_t18TWAI_ERROR_BUS_OFFE" title="TWAI_ERROR_BUS_OFF"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">TWAI_ERROR_BUS_OFF</span></code></a> to <a class="reference internal" href="#_CPPv4N18twai_error_state_t17TWAI_ERROR_ACTIVEE" title="TWAI_ERROR_ACTIVE"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">TWAI_ERROR_ACTIVE</span></code></a>. A recovered node can immediately resume transmissions; if there are pending tasks in the transmit queue, the driver will start transmitting them right away.</p>
</section>
<section id="power-management">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Power Management</a><a class="headerlink" href="#power-management" title="Permalink to this heading">ï</a></h3>
<p>When power management is enabled via <a class="reference internal" href="../kconfig-reference.html#config-pm-enable"><span class="std std-ref">CONFIG_PM_ENABLE</span></a>, the system may adjust or disable clock sources before entering sleep mode, which could cause TWAI to malfunction. To prevent this, the driver manages a power management lock internally. This lock is acquired when calling <a class="reference internal" href="#_CPPv416twai_node_enable18twai_node_handle_t" title="twai_node_enable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_enable()</span></code></a>, ensuring the system does not enter sleep mode and TWAI remains functional. To allow the system to enter a low-power state, call <a class="reference internal" href="#_CPPv417twai_node_disable18twai_node_handle_t" title="twai_node_disable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">twai_node_disable()</span></code></a> to release the lock. During sleep, the TWAI controller will also stop functioning.</p>
</section>
<section id="cache-safety">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Cache Safety</a><a class="headerlink" href="#cache-safety" title="Permalink to this heading">ï</a></h3>
<p>During Flash write operations, the system temporarily disables cache to prevent instruction and data fetch errors from Flash. This can cause interrupt handlers stored in Flash to become unresponsive. If you want interrupt routines to remain operational during cache-disabled periods, enable the <a class="reference internal" href="../kconfig-reference.html#config-twai-isr-cache-safe"><span class="std std-ref">CONFIG_TWAI_ISR_CACHE_SAFE</span></a> option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When this option is enabled, <strong>all interrupt callback functions and their context data must reside in internal memory</strong>, because the system cannot fetch instructions or data from Flash while the cache is disabled.</p>
</div>
</section>
<section id="thread-safety">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Thread Safety</a><a class="headerlink" href="#thread-safety" title="Permalink to this heading">ï</a></h3>
<p>The driver guarantees thread safety for all public TWAI APIs. You can safely call these APIs from different RTOS tasks without requiring additional synchronization or locking mechanisms.</p>
</section>
<section id="performance">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Performance</a><a class="headerlink" href="#performance" title="Permalink to this heading">ï</a></h3>
<p>To improve the real-time performance of interrupt handling, the driver provides the <a class="reference internal" href="../kconfig-reference.html#config-twai-isr-in-iram"><span class="std std-ref">CONFIG_TWAI_ISR_IN_IRAM</span></a> option. When enabled, the TWAI ISR (Interrupt Service Routine) is placed in internal RAM, reducing latency caused by instruction fetching from Flash.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>However, user-defined callback functions and context data invoked by the ISR may still reside in Flash. To fully eliminate Flash latency, users must place these functions and data into internal RAM using macros such as <code class="xref c c-macro docutils literal notranslate"><span class="pre">IRAM_ATTR</span></code> for functions and <code class="xref c c-macro docutils literal notranslate"><span class="pre">DRAM_ATTR</span></code> for data.</p>
</div>
</section>
<section id="resource-usage">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Resource Usage</a><a class="headerlink" href="#resource-usage" title="Permalink to this heading">ï</a></h3>
<p>You can inspect the Flash and memory usage of the TWAI driver using the <a class="reference internal" href="../../api-guides/tools/idf-size.html"><span class="doc">IDF Size</span></a> tool. Below are the test conditions (based on the ESP32-C6 as an example):</p>
<ul>
<li><p>Compiler optimization level is set to <code class="docutils literal notranslate"><span class="pre">-Os</span></code> to minimize code size.</p></li>
<li><p>Default log level is set to <code class="docutils literal notranslate"><span class="pre">ESP_LOG_INFO</span></code> to balance debugging information and performance.</p></li>
<li><p>The following driver optimization options are disabled:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../kconfig-reference.html#config-twai-isr-in-iram"><span class="std std-ref">CONFIG_TWAI_ISR_IN_IRAM</span></a> â ISR is not placed in IRAM.</p></li>
<li><p><a class="reference internal" href="../kconfig-reference.html#config-twai-isr-cache-safe"><span class="std std-ref">CONFIG_TWAI_ISR_CACHE_SAFE</span></a> â Cache safety option is disabled.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>The following resource usage data is for reference only. Actual values may vary across different target chips.</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Component Layer</p></th>
<th class="head"><p>Total Size</p></th>
<th class="head"><p>DIRAM</p></th>
<th class="head"><p>.bss</p></th>
<th class="head"><p>.data</p></th>
<th class="head"><p>.text</p></th>
<th class="head"><p>Flash</p></th>
<th class="head"><p>.rodata</p></th>
<th class="head"><p>.text</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p>7262</p></td>
<td><p>12</p></td>
<td><p>12</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>7250</p></td>
<td><p>506</p></td>
<td><p>6744</p></td>
</tr>
<tr class="row-odd"><td><p>hal</p></td>
<td><p>1952</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1952</p></td>
</tr>
<tr class="row-even"><td><p>soc</p></td>
<td><p>64</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>64</p></td>
<td><p>64</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>Resource Usage with <a class="reference internal" href="../kconfig-reference.html#config-twai-isr-in-iram"><span class="std std-ref">CONFIG_TWAI_ISR_IN_IRAM</span></a> Enabled:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Component Layer</p></th>
<th class="head"><p>Total Size</p></th>
<th class="head"><p>DIRAM</p></th>
<th class="head"><p>.bss</p></th>
<th class="head"><p>.data</p></th>
<th class="head"><p>.text</p></th>
<th class="head"><p>Flash</p></th>
<th class="head"><p>.rodata</p></th>
<th class="head"><p>.text</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p>7248</p></td>
<td><p>692</p></td>
<td><p>12</p></td>
<td><p>0</p></td>
<td><p>680</p></td>
<td><p>6556</p></td>
<td><p>506</p></td>
<td><p>6050</p></td>
</tr>
<tr class="row-odd"><td><p>hal</p></td>
<td><p>1952</p></td>
<td><p>1030</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1030</p></td>
<td><p>922</p></td>
<td><p>0</p></td>
<td><p>922</p></td>
</tr>
<tr class="row-even"><td><p>soc</p></td>
<td><p>64</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>64</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>Additionally, each TWAI handle dynamically allocates approximately <code class="docutils literal notranslate"><span class="pre">168</span></code> + 4 * <a class="reference internal" href="#_CPPv4N25twai_onchip_node_config_t14tx_queue_depthE" title="twai_onchip_node_config_t::tx_queue_depth"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">twai_onchip_node_config_t::tx_queue_depth</span></code></a> bytes of memory from the heap.</p>
</section>
<section id="other-kconfig-options">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Other Kconfig Options</a><a class="headerlink" href="#other-kconfig-options" title="Permalink to this heading">ï</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../kconfig-reference.html#config-twai-enable-debug-log"><span class="std std-ref">CONFIG_TWAI_ENABLE_DEBUG_LOG</span></a>: This option forces all debug logs of the TWAI driver to be enabled regardless of the global log level settings. Enabling this can help developers obtain more detailed log information during debugging, making it easier to locate and resolve issues.</p></li>
</ul>
</section>
</section>
<section id="application-examples">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Application Examples</a><a class="headerlink" href="#application-examples" title="Permalink to this heading">ï</a></h2>
<p><ul class="simple">
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/758939ca/examples/peripherals/twai/twai_utils">peripherals/twai/twai_utils</a> demonstrates how to use the TWAI (Two-Wire Automotive Interface) APIs to create a command-line interface for TWAI bus communication, supporting frame transmission/reception, filtering, monitoring, and both classic and FD formats for testing and debugging TWAI networks.</p></li>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/758939ca/examples/peripherals/twai/twai_error_recovery">peripherals/twai/twai_error_recovery</a> demonstrates how to recover nodes from the bus-off state and resume communication, as well as bus error reporting, node state changes, and other event information.</p></li>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/tree/758939ca/examples/peripherals/twai/twai_network">peripherals/twai/twai_network</a> using 2 nodes with different roles: transmitting and listening, demonstrates how to use the driver for single and bulk data transmission, as well as configure filters to receive these data.</p></li>
</ul>
</p>
</section>
<section id="api-reference">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">API Reference</a><a class="headerlink" href="#api-reference" title="Permalink to this heading">ï</a></h2>
<section id="header-file">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Header File</a><a class="headerlink" href="#header-file" title="Permalink to this heading">ï</a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/758939ca/components/esp_driver_twai/include/esp_twai_onchip.h">components/esp_driver_twai/include/esp_twai_onchip.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_twai_onchip.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_driver_twai
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_driver_twai
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="functions">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Functions</a><a class="headerlink" href="#functions" title="Permalink to this heading">ï</a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420twai_new_node_onchipPK25twai_onchip_node_config_tP18twai_node_handle_t">
<span id="_CPPv320twai_new_node_onchipPK25twai_onchip_node_config_tP18twai_node_handle_t"></span><span id="_CPPv220twai_new_node_onchipPK25twai_onchip_node_config_tP18twai_node_handle_t"></span><span id="twai_new_node_onchip__twai_onchip_node_config_tCP.twai_node_handle_tP"></span><span class="target" id="esp__twai__onchip_8h_1ac5b7e7fea9598105f234f4585ffeb7f4"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_new_node_onchip</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_onchip_node_config_t" title="twai_onchip_node_config_t"><span class="n"><span class="pre">twai_onchip_node_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">node_config</span></span>, <a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">node_ret</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420twai_new_node_onchipPK25twai_onchip_node_config_tP18twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Allocate a TWAI hardware node by specific init config structure To delete/free the TWAI, call <code class="docutils literal notranslate"><span class="pre">twai_node_delete()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_config</strong> -- <strong>[in]</strong> Init config structure </p></li>
<li><p><strong>node_ret</strong> -- <strong>[out]</strong> Return driver handle</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK Allocate success ESP_ERR_NO_MEM No enough free memory ESP_ERR_NOT_FOUND No free hardware controller ESP_ERR_INVALID_ARG Config argument not available ESP_ERR_INVALID_STATE State error, including hardware state error and driver state error ESP_FAIL Other reasons </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421twai_make_dual_filter8uint16_t8uint16_t8uint16_t8uint16_tb">
<span id="_CPPv321twai_make_dual_filter8uint16_t8uint16_t8uint16_t8uint16_tb"></span><span id="_CPPv221twai_make_dual_filter8uint16_t8uint16_t8uint16_t8uint16_tb"></span><span id="twai_make_dual_filter__uint16_t.uint16_t.uint16_t.uint16_t.b"></span><span class="target" id="esp__twai__onchip_8h_1adefcec4c92dc99891a4eed04a0fd4dac"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_mask_filter_config_t" title="twai_mask_filter_config_t"><span class="n"><span class="pre">twai_mask_filter_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_make_dual_filter</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">id1</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mask1</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">id2</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mask2</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">is_ext</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421twai_make_dual_filter8uint16_t8uint16_t8uint16_t8uint16_tb" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Helper function to configure a dual 16-bit acceptance filter. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For 29bits Extended IDs, ONLY high 16bits id/mask is used for each filter.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id1</strong> -- First ID to filter. </p></li>
<li><p><strong>mask1</strong> -- Mask for first ID. </p></li>
<li><p><strong>id2</strong> -- Second ID to filter. </p></li>
<li><p><strong>mask2</strong> -- Mask for second ID. </p></li>
<li><p><strong>is_ext</strong> -- True if using Extended (29-bit) IDs, false for Standard (11-bit) IDs. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#structtwai__mask__filter__config__t"><span class="std std-ref">twai_mask_filter_config_t</span></a> A filled filter configuration structure for dual filtering. </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="structures">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Structures</a><a class="headerlink" href="#structures" title="Permalink to this heading">ï</a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425twai_onchip_node_config_t">
<span id="_CPPv325twai_onchip_node_config_t"></span><span id="_CPPv225twai_onchip_node_config_t"></span><span id="twai_onchip_node_config_t"></span><span class="target" id="structtwai__onchip__node__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_onchip_node_config_t</span></span></span><a class="headerlink" href="#_CPPv425twai_onchip_node_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI on-chip node initialization configuration structure. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t2txE">
<span id="_CPPv3N25twai_onchip_node_config_t2txE"></span><span id="_CPPv2N25twai_onchip_node_config_t2txE"></span><span id="twai_onchip_node_config_t::tx__gpio_num_t"></span><span class="target" id="structtwai__onchip__node__config__t_1ad38db021e34662dd0656b33ca4d3eda6"></span><span class="n"><span class="pre">gpio_num_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tx</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t2txE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>GPIO pin for twai TX </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t2rxE">
<span id="_CPPv3N25twai_onchip_node_config_t2rxE"></span><span id="_CPPv2N25twai_onchip_node_config_t2rxE"></span><span id="twai_onchip_node_config_t::rx__gpio_num_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a073f161f7dd6cc974f74c36869448a0b"></span><span class="n"><span class="pre">gpio_num_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rx</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t2rxE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>GPIO pin for twai RX </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t14quanta_clk_outE">
<span id="_CPPv3N25twai_onchip_node_config_t14quanta_clk_outE"></span><span id="_CPPv2N25twai_onchip_node_config_t14quanta_clk_outE"></span><span id="twai_onchip_node_config_t::quanta_clk_out__gpio_num_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a0aee7b6b056a6cdf602a5a3f99703a93"></span><span class="n"><span class="pre">gpio_num_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">quanta_clk_out</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t14quanta_clk_outE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>GPIO pin for quanta clock output, Set -1 to not use </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t17bus_off_indicatorE">
<span id="_CPPv3N25twai_onchip_node_config_t17bus_off_indicatorE"></span><span id="_CPPv2N25twai_onchip_node_config_t17bus_off_indicatorE"></span><span id="twai_onchip_node_config_t::bus_off_indicator__gpio_num_t"></span><span class="target" id="structtwai__onchip__node__config__t_1af0b51cb6080477263337ef75f7baae0a"></span><span class="n"><span class="pre">gpio_num_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bus_off_indicator</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t17bus_off_indicatorE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>GPIO pin for bus-off indicator, Set -1 to not use </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t6io_cfgE">
<span id="_CPPv3N25twai_onchip_node_config_t6io_cfgE"></span><span id="_CPPv2N25twai_onchip_node_config_t6io_cfgE"></span><span id="twai_onchip_node_config_t::io_cfg__twai_onchip_node_config_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a95560cdfbe43dbed8dfef77651050dfa"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_onchip_node_config_t" title="twai_onchip_node_config_t"><span class="n"><span class="pre">twai_onchip_node_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">io_cfg</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t6io_cfgE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>I/O configuration </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t7clk_srcE">
<span id="_CPPv3N25twai_onchip_node_config_t7clk_srcE"></span><span id="_CPPv2N25twai_onchip_node_config_t7clk_srcE"></span><span id="twai_onchip_node_config_t::clk_src__twai_clock_source_t"></span><span class="target" id="structtwai__onchip__node__config__t_1ad4f94c81390dd4c1aa1de60b522f7751"></span><a class="reference internal" href="#_CPPv419twai_clock_source_t" title="twai_clock_source_t"><span class="n"><span class="pre">twai_clock_source_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">clk_src</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t7clk_srcE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Optional, clock source, remain 0 to using TWAI_CLK_SRC_DEFAULT by default </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t10bit_timingE">
<span id="_CPPv3N25twai_onchip_node_config_t10bit_timingE"></span><span id="_CPPv2N25twai_onchip_node_config_t10bit_timingE"></span><span id="twai_onchip_node_config_t::bit_timing__twai_timing_basic_config_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a73a1f1c6336b427dabcbbae905ed8002"></span><a class="reference internal" href="#_CPPv426twai_timing_basic_config_t" title="twai_timing_basic_config_t"><span class="n"><span class="pre">twai_timing_basic_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bit_timing</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t10bit_timingE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Timing configuration for classic twai and FD arbitration stage </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t11data_timingE">
<span id="_CPPv3N25twai_onchip_node_config_t11data_timingE"></span><span id="_CPPv2N25twai_onchip_node_config_t11data_timingE"></span><span id="twai_onchip_node_config_t::data_timing__twai_timing_basic_config_t"></span><span class="target" id="structtwai__onchip__node__config__t_1adc955a943a6128afbeed9e662daa9c1b"></span><a class="reference internal" href="#_CPPv426twai_timing_basic_config_t" title="twai_timing_basic_config_t"><span class="n"><span class="pre">twai_timing_basic_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data_timing</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t11data_timingE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Optional, timing configuration for FD data stage </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t14fail_retry_cntE">
<span id="_CPPv3N25twai_onchip_node_config_t14fail_retry_cntE"></span><span id="_CPPv2N25twai_onchip_node_config_t14fail_retry_cntE"></span><span id="twai_onchip_node_config_t::fail_retry_cnt__int8_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a180b7fcd58b70fde376344a78ccd12f9"></span><span class="n"><span class="pre">int8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fail_retry_cnt</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t14fail_retry_cntE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Hardware retry limit if failed, range [-1:15], -1 for re-trans forever </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t14tx_queue_depthE">
<span id="_CPPv3N25twai_onchip_node_config_t14tx_queue_depthE"></span><span id="_CPPv2N25twai_onchip_node_config_t14tx_queue_depthE"></span><span id="twai_onchip_node_config_t::tx_queue_depth__uint32_t"></span><span class="target" id="structtwai__onchip__node__config__t_1ad488eef242bd3442ff5b2b2e17ce0676"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tx_queue_depth</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t14tx_queue_depthE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Depth of the transmit queue </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t13intr_priorityE">
<span id="_CPPv3N25twai_onchip_node_config_t13intr_priorityE"></span><span id="_CPPv2N25twai_onchip_node_config_t13intr_priorityE"></span><span id="twai_onchip_node_config_t::intr_priority__i"></span><span class="target" id="structtwai__onchip__node__config__t_1a64d950c8e643950fc1c1111450962f18"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">intr_priority</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t13intr_priorityE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Interrupt priority, [0:3] </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t16enable_self_testE">
<span id="_CPPv3N25twai_onchip_node_config_t16enable_self_testE"></span><span id="_CPPv2N25twai_onchip_node_config_t16enable_self_testE"></span><span id="twai_onchip_node_config_t::enable_self_test__uint32_t"></span><span class="target" id="structtwai__onchip__node__config__t_1ab8a9f727dea0bd1ddbbd465ce2ee7b04"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enable_self_test</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t16enable_self_testE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Transmission does not require acknowledgment. Use this mode for self testing </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t15enable_loopbackE">
<span id="_CPPv3N25twai_onchip_node_config_t15enable_loopbackE"></span><span id="_CPPv2N25twai_onchip_node_config_t15enable_loopbackE"></span><span id="twai_onchip_node_config_t::enable_loopback__uint32_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a5a01e8da1898ad974b44a88be6f471f1"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enable_loopback</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t15enable_loopbackE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>The TWAI controller receive back frames what it send out </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t18enable_listen_onlyE">
<span id="_CPPv3N25twai_onchip_node_config_t18enable_listen_onlyE"></span><span id="_CPPv2N25twai_onchip_node_config_t18enable_listen_onlyE"></span><span id="twai_onchip_node_config_t::enable_listen_only__uint32_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a0e6745f5ab8872817f3a73242f9a46ab"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enable_listen_only</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t18enable_listen_onlyE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>The TWAI controller will not influence the bus (No transmissions or acknowledgments) but can receive messages </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t14no_receive_rtrE">
<span id="_CPPv3N25twai_onchip_node_config_t14no_receive_rtrE"></span><span id="_CPPv2N25twai_onchip_node_config_t14no_receive_rtrE"></span><span id="twai_onchip_node_config_t::no_receive_rtr__uint32_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a4a41d1fddbbcb7f26316f05441de423e"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_receive_rtr</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t14no_receive_rtrE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Don't receive remote frames </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_onchip_node_config_t5flagsE">
<span id="_CPPv3N25twai_onchip_node_config_t5flagsE"></span><span id="_CPPv2N25twai_onchip_node_config_t5flagsE"></span><span id="twai_onchip_node_config_t::flags__twai_onchip_node_config_t"></span><span class="target" id="structtwai__onchip__node__config__t_1a0dfc926d04820e2ee9964ebb36aa5a31"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_onchip_node_config_t" title="twai_onchip_node_config_t"><span class="n"><span class="pre">twai_onchip_node_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#_CPPv4N25twai_onchip_node_config_t5flagsE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Misc configuration flags </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id1">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Header File</a><a class="headerlink" href="#id1" title="Permalink to this heading">ï</a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/758939ca/components/esp_driver_twai/include/esp_twai.h">components/esp_driver_twai/include/esp_twai.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_twai.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_driver_twai
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_driver_twai
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Functions</a><a class="headerlink" href="#id2" title="Permalink to this heading">ï</a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv416twai_node_enable18twai_node_handle_t">
<span id="_CPPv316twai_node_enable18twai_node_handle_t"></span><span id="_CPPv216twai_node_enable18twai_node_handle_t"></span><span id="twai_node_enable__twai_node_handle_t"></span><span class="target" id="esp__twai_8h_1aaff7a8b9a4a080a45f465856224b6579"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_enable</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416twai_node_enable18twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Enable the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> -- Handle to the TWAI node </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417twai_node_disable18twai_node_handle_t">
<span id="_CPPv317twai_node_disable18twai_node_handle_t"></span><span id="_CPPv217twai_node_disable18twai_node_handle_t"></span><span id="twai_node_disable__twai_node_handle_t"></span><span class="target" id="esp__twai_8h_1a9aad5c9fc389ba66b82f4eb1500af8c8"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_disable</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417twai_node_disable18twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Disable the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> -- Handle to the TWAI node </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417twai_node_recover18twai_node_handle_t">
<span id="_CPPv317twai_node_recover18twai_node_handle_t"></span><span id="_CPPv217twai_node_recover18twai_node_handle_t"></span><span id="twai_node_recover__twai_node_handle_t"></span><span class="target" id="esp__twai_8h_1af551e1e0cb21e3dcfc5a1199bc7519b0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_recover</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417twai_node_recover18twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Init the recover process for TWAI node which in bus-off. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Follow <code class="docutils literal notranslate"><span class="pre">on_state_change</span></code> callback or <code class="docutils literal notranslate"><span class="pre">twai_node_get_info</span></code> to know recover finish or not</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> -- Handle to the TWAI node </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv416twai_node_delete18twai_node_handle_t">
<span id="_CPPv316twai_node_delete18twai_node_handle_t"></span><span id="_CPPv216twai_node_delete18twai_node_handle_t"></span><span id="twai_node_delete__twai_node_handle_t"></span><span class="target" id="esp__twai_8h_1a53f4f978070407a99597871cb5e52674"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_delete</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416twai_node_delete18twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Delete the TWAI node and release resources. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> -- Handle to the TWAI node </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv434twai_node_register_event_callbacks18twai_node_handle_tPK22twai_event_callbacks_tPv">
<span id="_CPPv334twai_node_register_event_callbacks18twai_node_handle_tPK22twai_event_callbacks_tPv"></span><span id="_CPPv234twai_node_register_event_callbacks18twai_node_handle_tPK22twai_event_callbacks_tPv"></span><span id="twai_node_register_event_callbacks__twai_node_handle_t.twai_event_callbacks_tCP.voidP"></span><span class="target" id="esp__twai_8h_1ad906eecdb88f53c7f1d8692532772abd"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_register_event_callbacks</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv422twai_event_callbacks_t" title="twai_event_callbacks_t"><span class="n"><span class="pre">twai_event_callbacks_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">cbs</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">user_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv434twai_node_register_event_callbacks18twai_node_handle_tPK22twai_event_callbacks_tPv" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Register event callbacks for the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- Handle to the TWAI node </p></li>
<li><p><strong>cbs</strong> -- Pointer to a structure of event callback functions </p></li>
<li><p><strong>user_data</strong> -- User-defined data passed to callback functions </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv425twai_node_reconfig_timing18twai_node_handle_tPK29twai_timing_advanced_config_tPK29twai_timing_advanced_config_t">
<span id="_CPPv325twai_node_reconfig_timing18twai_node_handle_tPK29twai_timing_advanced_config_tPK29twai_timing_advanced_config_t"></span><span id="_CPPv225twai_node_reconfig_timing18twai_node_handle_tPK29twai_timing_advanced_config_tPK29twai_timing_advanced_config_t"></span><span id="twai_node_reconfig_timing__twai_node_handle_t.twai_timing_advanced_config_tCP.twai_timing_advanced_config_tCP"></span><span class="target" id="esp__twai_8h_1a5034337755b839c2eeee1c1fc568d325"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_reconfig_timing</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv429twai_timing_advanced_config_t" title="twai_timing_advanced_config_t"><span class="n"><span class="pre">twai_timing_advanced_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bit_timing</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv429twai_timing_advanced_config_t" title="twai_timing_advanced_config_t"><span class="n"><span class="pre">twai_timing_advanced_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">data_timing</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425twai_node_reconfig_timing18twai_node_handle_tPK29twai_timing_advanced_config_tPK29twai_timing_advanced_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Reconfigure the timing settings of the TWAI node. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can reconfigure the timing for the arbitration and data phase, separately or together.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- Handle to the TWAI node </p></li>
<li><p><strong>bit_timing</strong> -- Optional,pointer to new twai cc(classic) or arbitration phase of twai fd timing configuration </p></li>
<li><p><strong>data_timing</strong> -- Optional, pointer to new twai fd timing configuration </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv428twai_node_config_mask_filter18twai_node_handle_t7uint8_tPK25twai_mask_filter_config_t">
<span id="_CPPv328twai_node_config_mask_filter18twai_node_handle_t7uint8_tPK25twai_mask_filter_config_t"></span><span id="_CPPv228twai_node_config_mask_filter18twai_node_handle_t7uint8_tPK25twai_mask_filter_config_t"></span><span id="twai_node_config_mask_filter__twai_node_handle_t.uint8_t.twai_mask_filter_config_tCP"></span><span class="target" id="esp__twai_8h_1a8002b4ddb7244b26c0d91b44e399130a"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_config_mask_filter</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">filter_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_mask_filter_config_t" title="twai_mask_filter_config_t"><span class="n"><span class="pre">twai_mask_filter_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">mask_cfg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428twai_node_config_mask_filter18twai_node_handle_t7uint8_tPK25twai_mask_filter_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Configure the mask filter of the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- Handle to the TWAI node </p></li>
<li><p><strong>filter_id</strong> -- Index of the filter to configure </p></li>
<li><p><strong>mask_cfg</strong> -- Pointer to the mask filter configuration </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv429twai_node_config_range_filter18twai_node_handle_t7uint8_tPK26twai_range_filter_config_t">
<span id="_CPPv329twai_node_config_range_filter18twai_node_handle_t7uint8_tPK26twai_range_filter_config_t"></span><span id="_CPPv229twai_node_config_range_filter18twai_node_handle_t7uint8_tPK26twai_range_filter_config_t"></span><span id="twai_node_config_range_filter__twai_node_handle_t.uint8_t.twai_range_filter_config_tCP"></span><span class="target" id="esp__twai_8h_1a7bfdc6bd578d7780f0a015db6bd768e1"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_config_range_filter</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">filter_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv426twai_range_filter_config_t" title="twai_range_filter_config_t"><span class="n"><span class="pre">twai_range_filter_config_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">range_cfg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429twai_node_config_range_filter18twai_node_handle_t7uint8_tPK26twai_range_filter_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Configure the range filter of the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- Handle to the TWAI node </p></li>
<li><p><strong>filter_id</strong> -- Index of the filter to configure </p></li>
<li><p><strong>range_cfg</strong> -- Pointer to the range filter configuration </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418twai_node_get_info18twai_node_handle_tP18twai_node_status_tP18twai_node_record_t">
<span id="_CPPv318twai_node_get_info18twai_node_handle_tP18twai_node_status_tP18twai_node_record_t"></span><span id="_CPPv218twai_node_get_info18twai_node_handle_tP18twai_node_status_tP18twai_node_record_t"></span><span id="twai_node_get_info__twai_node_handle_t.twai_node_status_tP.twai_node_record_tP"></span><span class="target" id="esp__twai_8h_1ae33ae37e698d0d39a373f35272ff3ea9"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_get_info</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <a class="reference internal" href="#_CPPv418twai_node_status_t" title="twai_node_status_t"><span class="n"><span class="pre">twai_node_status_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">status_ret</span></span>, <a class="reference internal" href="#_CPPv418twai_node_record_t" title="twai_node_record_t"><span class="n"><span class="pre">twai_node_record_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">statistics_ret</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418twai_node_get_info18twai_node_handle_tP18twai_node_status_tP18twai_node_record_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Get information about the TWAI node. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- Handle to the TWAI node </p></li>
<li><p><strong>status_ret</strong> -- Pointer to store the current node status </p></li>
<li><p><strong>statistics_ret</strong> -- Pointer to store node statistics </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418twai_node_transmit18twai_node_handle_tPK12twai_frame_ti">
<span id="_CPPv318twai_node_transmit18twai_node_handle_tPK12twai_frame_ti"></span><span id="_CPPv218twai_node_transmit18twai_node_handle_tPK12twai_frame_ti"></span><span id="twai_node_transmit__twai_node_handle_t.twai_frame_tCP.i"></span><span class="target" id="esp__twai_8h_1afa23a7913e57196b6e1d07e7ece1c1b5"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_transmit</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv412twai_frame_t" title="twai_frame_t"><span class="n"><span class="pre">twai_frame_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">frame</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_ms</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418twai_node_transmit18twai_node_handle_tPK12twai_frame_ti" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Transmit a TWAI frame. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- <strong>[in]</strong> Handle to the TWAI node </p></li>
<li><p><strong>frame</strong> -- <strong>[in]</strong> Pointer to the frame to transmit </p></li>
<li><p><strong>timeout_ms</strong> -- <strong>[in]</strong> Maximum wait time if the transmission queue is full (milliseconds), -1 to wait forever </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv426twai_node_receive_from_isr18twai_node_handle_tP12twai_frame_t">
<span id="_CPPv326twai_node_receive_from_isr18twai_node_handle_tP12twai_frame_t"></span><span id="_CPPv226twai_node_receive_from_isr18twai_node_handle_tP12twai_frame_t"></span><span id="twai_node_receive_from_isr__twai_node_handle_t.twai_frame_tP"></span><span class="target" id="esp__twai_8h_1a2555ff8fa4d81e989c6ca82e219caaa9"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t"><span class="n"><span class="pre">esp_err_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_receive_from_isr</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">node</span></span>, <a class="reference internal" href="#_CPPv412twai_frame_t" title="twai_frame_t"><span class="n"><span class="pre">twai_frame_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">rx_frame</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426twai_node_receive_from_isr18twai_node_handle_tP12twai_frame_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Receive a TWAI frame from 'rx_done_cb'. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function can only be called from the <code class="docutils literal notranslate"><span class="pre">rx_done_cb</span></code> callback, you can't call it from a task. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please also provide <code class="docutils literal notranslate"><span class="pre">buffer</span></code> and <code class="docutils literal notranslate"><span class="pre">buffer_len</span></code> inside the rx_frame </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Can get original data length from <code class="docutils literal notranslate"><span class="pre">twaifd_dlc2len(rx_frame.header.dlc)</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> -- <strong>[in]</strong> Handle to the TWAI node </p></li>
<li><p><strong>rx_frame</strong> -- <strong>[out]</strong> Pointer to the frame store rx content </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ESP_OK on success, error code otherwise </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id3">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Header File</a><a class="headerlink" href="#id3" title="Permalink to this heading">ï</a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/758939ca/components/esp_driver_twai/include/esp_twai_types.h">components/esp_driver_twai/include/esp_twai_types.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;esp_twai_types.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>This header file is a part of the API provided by the <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code> component. To declare that your component depends on <code class="docutils literal notranslate"><span class="pre">esp_driver_twai</span></code>, add the following to your CMakeLists.txt:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>REQUIRES esp_driver_twai
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PRIV_REQUIRES esp_driver_twai
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id34" role="doc-backlink">Structures</a><a class="headerlink" href="#id4" title="Permalink to this heading">ï</a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv426twai_timing_basic_config_t">
<span id="_CPPv326twai_timing_basic_config_t"></span><span id="_CPPv226twai_timing_basic_config_t"></span><span id="twai_timing_basic_config_t"></span><span class="target" id="structtwai__timing__basic__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_timing_basic_config_t</span></span></span><a class="headerlink" href="#_CPPv426twai_timing_basic_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI bitrate timing config basic (simple) mode. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_timing_basic_config_t7bitrateE">
<span id="_CPPv3N26twai_timing_basic_config_t7bitrateE"></span><span id="_CPPv2N26twai_timing_basic_config_t7bitrateE"></span><span id="twai_timing_basic_config_t::bitrate__uint32_t"></span><span class="target" id="structtwai__timing__basic__config__t_1abd75c4d918cf60f6208ccc515e0d8f71"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bitrate</span></span></span><a class="headerlink" href="#_CPPv4N26twai_timing_basic_config_t7bitrateE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Expected TWAI bus baud_rate/bitrate in bits/second </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_timing_basic_config_t10sp_permillE">
<span id="_CPPv3N26twai_timing_basic_config_t10sp_permillE"></span><span id="_CPPv2N26twai_timing_basic_config_t10sp_permillE"></span><span id="twai_timing_basic_config_t::sp_permill__uint16_t"></span><span class="target" id="structtwai__timing__basic__config__t_1a5b098ace8fae9c8b7839432ff1611e8b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sp_permill</span></span></span><a class="headerlink" href="#_CPPv4N26twai_timing_basic_config_t10sp_permillE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Optional, sampling point in permill (1/1000) of the entire bit time </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_timing_basic_config_t11ssp_permillE">
<span id="_CPPv3N26twai_timing_basic_config_t11ssp_permillE"></span><span id="_CPPv2N26twai_timing_basic_config_t11ssp_permillE"></span><span id="twai_timing_basic_config_t::ssp_permill__uint16_t"></span><span class="target" id="structtwai__timing__basic__config__t_1af69d943481d91902c1530500b15710ef"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ssp_permill</span></span></span><a class="headerlink" href="#_CPPv4N26twai_timing_basic_config_t11ssp_permillE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Optional, secondary sample point(ssp) in permill (1/1000) of the entire bit time </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv412twai_frame_t">
<span id="_CPPv312twai_frame_t"></span><span id="_CPPv212twai_frame_t"></span><span id="twai_frame_t"></span><span class="target" id="structtwai__frame__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_frame_t</span></span></span><a class="headerlink" href="#_CPPv412twai_frame_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI transaction frame param type. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12twai_frame_t6headerE">
<span id="_CPPv3N12twai_frame_t6headerE"></span><span id="_CPPv2N12twai_frame_t6headerE"></span><span id="twai_frame_t::header__twai_frame_header_t"></span><span class="target" id="structtwai__frame__t_1a9c03096ec063de7342da256545b2445b"></span><a class="reference internal" href="#_CPPv419twai_frame_header_t" title="twai_frame_header_t"><span class="n"><span class="pre">twai_frame_header_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">header</span></span></span><a class="headerlink" href="#_CPPv4N12twai_frame_t6headerE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>message attribute/metadata, exclude data buffer </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12twai_frame_t6bufferE">
<span id="_CPPv3N12twai_frame_t6bufferE"></span><span id="_CPPv2N12twai_frame_t6bufferE"></span><span id="twai_frame_t::buffer__uint8_tP"></span><span class="target" id="structtwai__frame__t_1aff61780b5cd7a149430bcb64fe6bec72"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">buffer</span></span></span><a class="headerlink" href="#_CPPv4N12twai_frame_t6bufferE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>buffer address for tx and rx message data </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N12twai_frame_t10buffer_lenE">
<span id="_CPPv3N12twai_frame_t10buffer_lenE"></span><span id="_CPPv2N12twai_frame_t10buffer_lenE"></span><span id="twai_frame_t::buffer_len__s"></span><span class="target" id="structtwai__frame__t_1a987172ef39ea75c7a3940587afaaf2be"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">buffer_len</span></span></span><a class="headerlink" href="#_CPPv4N12twai_frame_t10buffer_lenE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>buffer length of provided data buffer pointer, in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv418twai_node_status_t">
<span id="_CPPv318twai_node_status_t"></span><span id="_CPPv218twai_node_status_t"></span><span id="twai_node_status_t"></span><span class="target" id="structtwai__node__status__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_status_t</span></span></span><a class="headerlink" href="#_CPPv418twai_node_status_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI node's status. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_node_status_t5stateE">
<span id="_CPPv3N18twai_node_status_t5stateE"></span><span id="_CPPv2N18twai_node_status_t5stateE"></span><span id="twai_node_status_t::state__twai_error_state_t"></span><span class="target" id="structtwai__node__status__t_1a1bf165d2a6923886403c9c2466583a9e"></span><a class="reference internal" href="#_CPPv418twai_error_state_t" title="twai_error_state_t"><span class="n"><span class="pre">twai_error_state_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">state</span></span></span><a class="headerlink" href="#_CPPv4N18twai_node_status_t5stateE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Node's error state </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_node_status_t14tx_error_countE">
<span id="_CPPv3N18twai_node_status_t14tx_error_countE"></span><span id="_CPPv2N18twai_node_status_t14tx_error_countE"></span><span id="twai_node_status_t::tx_error_count__uint16_t"></span><span class="target" id="structtwai__node__status__t_1a5982b77d6f0454099ad32d8f362f8caa"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tx_error_count</span></span></span><a class="headerlink" href="#_CPPv4N18twai_node_status_t14tx_error_countE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Node's TX error count </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_node_status_t14rx_error_countE">
<span id="_CPPv3N18twai_node_status_t14rx_error_countE"></span><span id="_CPPv2N18twai_node_status_t14rx_error_countE"></span><span id="twai_node_status_t::rx_error_count__uint16_t"></span><span class="target" id="structtwai__node__status__t_1a235156f03510ebdeb52550393c50b5cd"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rx_error_count</span></span></span><a class="headerlink" href="#_CPPv4N18twai_node_status_t14rx_error_countE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Node's RX error count </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv418twai_node_record_t">
<span id="_CPPv318twai_node_record_t"></span><span id="_CPPv218twai_node_record_t"></span><span id="twai_node_record_t"></span><span class="target" id="structtwai__node__record__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_record_t</span></span></span><a class="headerlink" href="#_CPPv418twai_node_record_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI node's statistics/record type. </p>
<p>This structure contains some statistics regarding a node's communication on the TWAI bus </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_node_record_t11bus_err_numE">
<span id="_CPPv3N18twai_node_record_t11bus_err_numE"></span><span id="_CPPv2N18twai_node_record_t11bus_err_numE"></span><span id="twai_node_record_t::bus_err_num__uint32_t"></span><span class="target" id="structtwai__node__record__t_1a81575e8b0f14d1ab2855a6581f9f1dc1"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bus_err_num</span></span></span><a class="headerlink" href="#_CPPv4N18twai_node_record_t11bus_err_numE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Cumulative number (since <code class="docutils literal notranslate"><span class="pre">twai_node_enable()</span></code>) of bus errors </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425twai_tx_done_event_data_t">
<span id="_CPPv325twai_tx_done_event_data_t"></span><span id="_CPPv225twai_tx_done_event_data_t"></span><span id="twai_tx_done_event_data_t"></span><span class="target" id="structtwai__tx__done__event__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_tx_done_event_data_t</span></span></span><a class="headerlink" href="#_CPPv425twai_tx_done_event_data_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;TX done&quot; event data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_tx_done_event_data_t13is_tx_successE">
<span id="_CPPv3N25twai_tx_done_event_data_t13is_tx_successE"></span><span id="_CPPv2N25twai_tx_done_event_data_t13is_tx_successE"></span><span id="twai_tx_done_event_data_t::is_tx_success__b"></span><span class="target" id="structtwai__tx__done__event__data__t_1a298429b588fc1c119d10b5ffb6c66572"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_tx_success</span></span></span><a class="headerlink" href="#_CPPv4N25twai_tx_done_event_data_t13is_tx_successE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Indicate if frame send successful, refer <code class="docutils literal notranslate"><span class="pre">on_error</span></code> callback for fail reason if send failed </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_tx_done_event_data_t13done_tx_frameE">
<span id="_CPPv3N25twai_tx_done_event_data_t13done_tx_frameE"></span><span id="_CPPv2N25twai_tx_done_event_data_t13done_tx_frameE"></span><span id="twai_tx_done_event_data_t::done_tx_frame__twai_frame_tCP"></span><span class="target" id="structtwai__tx__done__event__data__t_1a481794d6abf59caedc83c326d3691a0f"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv412twai_frame_t" title="twai_frame_t"><span class="n"><span class="pre">twai_frame_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">done_tx_frame</span></span></span><a class="headerlink" href="#_CPPv4N25twai_tx_done_event_data_t13done_tx_frameE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Pointer to the frame that has been transmitted </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425twai_rx_done_event_data_t">
<span id="_CPPv325twai_rx_done_event_data_t"></span><span id="_CPPv225twai_rx_done_event_data_t"></span><span id="twai_rx_done_event_data_t"></span><span class="target" id="structtwai__rx__done__event__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_rx_done_event_data_t</span></span></span><a class="headerlink" href="#_CPPv425twai_rx_done_event_data_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;RX done&quot; event data. </p>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv430twai_state_change_event_data_t">
<span id="_CPPv330twai_state_change_event_data_t"></span><span id="_CPPv230twai_state_change_event_data_t"></span><span id="twai_state_change_event_data_t"></span><span class="target" id="structtwai__state__change__event__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_state_change_event_data_t</span></span></span><a class="headerlink" href="#_CPPv430twai_state_change_event_data_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;state change&quot; event data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N30twai_state_change_event_data_t7old_staE">
<span id="_CPPv3N30twai_state_change_event_data_t7old_staE"></span><span id="_CPPv2N30twai_state_change_event_data_t7old_staE"></span><span id="twai_state_change_event_data_t::old_sta__twai_error_state_t"></span><span class="target" id="structtwai__state__change__event__data__t_1a76a31ec4c460ca8c9b9fcb38a4a60932"></span><a class="reference internal" href="#_CPPv418twai_error_state_t" title="twai_error_state_t"><span class="n"><span class="pre">twai_error_state_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">old_sta</span></span></span><a class="headerlink" href="#_CPPv4N30twai_state_change_event_data_t7old_staE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Previous error state </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N30twai_state_change_event_data_t7new_staE">
<span id="_CPPv3N30twai_state_change_event_data_t7new_staE"></span><span id="_CPPv2N30twai_state_change_event_data_t7new_staE"></span><span id="twai_state_change_event_data_t::new_sta__twai_error_state_t"></span><span class="target" id="structtwai__state__change__event__data__t_1ab659a624d361a8c066a3059d1c8d9c84"></span><a class="reference internal" href="#_CPPv418twai_error_state_t" title="twai_error_state_t"><span class="n"><span class="pre">twai_error_state_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">new_sta</span></span></span><a class="headerlink" href="#_CPPv4N30twai_state_change_event_data_t7new_staE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>New error state after the change </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv423twai_error_event_data_t">
<span id="_CPPv323twai_error_event_data_t"></span><span id="_CPPv223twai_error_event_data_t"></span><span id="twai_error_event_data_t"></span><span class="target" id="structtwai__error__event__data__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_error_event_data_t</span></span></span><a class="headerlink" href="#_CPPv423twai_error_event_data_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;error&quot; event data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N23twai_error_event_data_t9err_flagsE">
<span id="_CPPv3N23twai_error_event_data_t9err_flagsE"></span><span id="_CPPv2N23twai_error_event_data_t9err_flagsE"></span><span id="twai_error_event_data_t::err_flags__twai_error_flags_t"></span><span class="target" id="structtwai__error__event__data__t_1a0bc88258e766777537aa1c2280e25c09"></span><a class="reference internal" href="#_CPPv418twai_error_flags_t" title="twai_error_flags_t"><span class="n"><span class="pre">twai_error_flags_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">err_flags</span></span></span><a class="headerlink" href="#_CPPv4N23twai_error_event_data_t9err_flagsE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Error flags indicating the type of the error </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv422twai_event_callbacks_t">
<span id="_CPPv322twai_event_callbacks_t"></span><span id="_CPPv222twai_event_callbacks_t"></span><span id="twai_event_callbacks_t"></span><span class="target" id="structtwai__event__callbacks__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_event_callbacks_t</span></span></span><a class="headerlink" href="#_CPPv422twai_event_callbacks_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Group of supported TWAI callbacks. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All of these callbacks is invoked from ISR context. Thus, the implementation of the callback function must adhere to the ISR restrictions such as not calling any blocking APIs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Set the particular event callback's entry to NULL to unregister it if not required. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When TWAI_ISR_CACHE_SAFE is enabled, the callbacks must be placed in IRAM. </p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22twai_event_callbacks_t10on_tx_doneE">
<span id="_CPPv3N22twai_event_callbacks_t10on_tx_doneE"></span><span id="_CPPv2N22twai_event_callbacks_t10on_tx_doneE"></span><span class="target" id="structtwai__event__callbacks__t_1a8e167ac3847e896474d48e0d6fe604f5"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">on_tx_done</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_tx_done_event_data_t" title="twai_tx_done_event_data_t"><span class="n"><span class="pre">twai_tx_done_event_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edata</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N22twai_event_callbacks_t10on_tx_doneE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;TX done&quot; event callback prototype. </p>
<dl class="field-list simple">
<dt class="field-odd">Param handle<span class="colon">:</span></dt>
<dd class="field-odd"><p>TWAI node handle </p>
</dd>
<dt class="field-even">Param edata<span class="colon">:</span></dt>
<dd class="field-even"><p>&quot;TX done&quot; event data (passed by the driver) </p>
</dd>
<dt class="field-odd">Param user_ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p>User data, passed from <code class="docutils literal notranslate"><span class="pre">twai_node_register_event_callbacks()</span></code></p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether a higher priority task has been unblocked by this function </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22twai_event_callbacks_t10on_rx_doneE">
<span id="_CPPv3N22twai_event_callbacks_t10on_rx_doneE"></span><span id="_CPPv2N22twai_event_callbacks_t10on_rx_doneE"></span><span class="target" id="structtwai__event__callbacks__t_1a28b04af230a10ba5b24c2144ffd2b425"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">on_rx_done</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv425twai_rx_done_event_data_t" title="twai_rx_done_event_data_t"><span class="n"><span class="pre">twai_rx_done_event_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edata</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N22twai_event_callbacks_t10on_rx_doneE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;RX done&quot; event callback prototype. </p>
<dl class="field-list simple">
<dt class="field-odd">Param handle<span class="colon">:</span></dt>
<dd class="field-odd"><p>TWAI node handle </p>
</dd>
<dt class="field-even">Param edata<span class="colon">:</span></dt>
<dd class="field-even"><p>&quot;RX done&quot; event data (passed by the driver) </p>
</dd>
<dt class="field-odd">Param user_ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p>User data, passed from <code class="docutils literal notranslate"><span class="pre">twai_node_register_event_callbacks()</span></code></p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether a higher priority task has been unblocked by this function </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22twai_event_callbacks_t15on_state_changeE">
<span id="_CPPv3N22twai_event_callbacks_t15on_state_changeE"></span><span id="_CPPv2N22twai_event_callbacks_t15on_state_changeE"></span><span class="target" id="structtwai__event__callbacks__t_1ab74f479cbb5fd2e1fab42658ce2c634b"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">on_state_change</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv430twai_state_change_event_data_t" title="twai_state_change_event_data_t"><span class="n"><span class="pre">twai_state_change_event_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edata</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N22twai_event_callbacks_t15on_state_changeE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;state change&quot; event callback prototype. </p>
<dl class="field-list simple">
<dt class="field-odd">Param handle<span class="colon">:</span></dt>
<dd class="field-odd"><p>TWAI node handle </p>
</dd>
<dt class="field-even">Param edata<span class="colon">:</span></dt>
<dd class="field-even"><p>&quot;state change&quot; event data (passed by the driver) </p>
</dd>
<dt class="field-odd">Param user_ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p>User data, passed from <code class="docutils literal notranslate"><span class="pre">twai_node_register_event_callbacks()</span></code></p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether a higher priority task has been unblocked by this function </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N22twai_event_callbacks_t8on_errorE">
<span id="_CPPv3N22twai_event_callbacks_t8on_errorE"></span><span id="_CPPv2N22twai_event_callbacks_t8on_errorE"></span><span class="target" id="structtwai__event__callbacks__t_1a868f577a62f80a5bb6d45a9595445eaa"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">on_error</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv418twai_node_handle_t" title="twai_node_handle_t"><span class="n"><span class="pre">twai_node_handle_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv423twai_error_event_data_t" title="twai_error_event_data_t"><span class="n"><span class="pre">twai_error_event_data_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edata</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N22twai_event_callbacks_t8on_errorE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI &quot;error&quot; event callback prototype. </p>
<dl class="field-list simple">
<dt class="field-odd">Param handle<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> TWAI node handle </p>
</dd>
<dt class="field-even">Param edata<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> &quot;error&quot; event data (passed by the driver) </p>
</dd>
<dt class="field-odd">Param user_ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> User data, passed from <code class="docutils literal notranslate"><span class="pre">twai_node_register_event_callbacks()</span></code></p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether a higher priority task has been unblocked by this function </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="type-definitions">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">Type Definitions</a><a class="headerlink" href="#type-definitions" title="Permalink to this heading">ï</a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv418twai_node_handle_t">
<span id="_CPPv318twai_node_handle_t"></span><span id="_CPPv218twai_node_handle_t"></span><span id="twai_node_handle_t"></span><span class="target" id="esp__twai__types_8h_1aaa4cc3b0fb835ff5fa805bff20ea42ea"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">twai_node_base</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">twai_node_handle_t</span></span></span><a class="headerlink" href="#_CPPv418twai_node_handle_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>ESP TWAI controller handle. </p>
</dd></dl>

</section>
<section id="id5">
<h3><a class="toc-backref" href="#id36" role="doc-backlink">Header File</a><a class="headerlink" href="#id5" title="Permalink to this heading">ï</a></h3>
<ul>
<li><p><a class="reference external" href="https://github.com/espressif/esp-idf/blob/758939ca/components/hal/include/hal/twai_types.h">components/hal/include/hal/twai_types.h</a></p></li>
<li><p>This header file can be included with:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;hal/twai_types.h&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id37" role="doc-backlink">Functions</a><a class="headerlink" href="#id6" title="Permalink to this heading">ï</a></h3>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv414twaifd_dlc2len8uint16_t">
<span id="_CPPv314twaifd_dlc2len8uint16_t"></span><span id="_CPPv214twaifd_dlc2len8uint16_t"></span><span id="twaifd_dlc2len__uint16_t"></span><span class="target" id="twai__types_8h_1ad1eab20b9a147736733d325c75ca0265"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twaifd_dlc2len</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">dlc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414twaifd_dlc2len8uint16_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Translate TWAIFD format DLC code to bytes length. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dlc</strong> -- <strong>[in]</strong> The frame DLC code follow the FD spec </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The byte length of DLC stand for </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv414twaifd_len2dlc8uint16_t">
<span id="_CPPv314twaifd_len2dlc8uint16_t"></span><span id="_CPPv214twaifd_len2dlc8uint16_t"></span><span id="twaifd_len2dlc__uint16_t"></span><span class="target" id="twai__types_8h_1a33a373010f45f4ececa3b4e023986d9d"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twaifd_len2dlc</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">byte_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414twaifd_len2dlc8uint16_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Translate TWAIFD format bytes length to DLC code. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>byte_len</strong> -- <strong>[in]</strong> The byte length of the message </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The FD adopted frame DLC code </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="unions">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">Unions</a><a class="headerlink" href="#unions" title="Permalink to this heading">ï</a></h3>
<dl class="cpp union">
<dt class="sig sig-object cpp" id="_CPPv418twai_error_flags_t">
<span id="_CPPv318twai_error_flags_t"></span><span id="_CPPv218twai_error_flags_t"></span><span class="target" id="uniontwai__error__flags__t"></span><span class="k"><span class="pre">union</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_error_flags_t</span></span></span><a class="headerlink" href="#_CPPv418twai_error_flags_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;twai_types.h&gt;</em></div>
<p>TWAI transmit error type structure. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t8arb_lostE">
<span id="_CPPv3N18twai_error_flags_t8arb_lostE"></span><span id="_CPPv2N18twai_error_flags_t8arb_lostE"></span><span id="twai_error_flags_t::arb_lost__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1a72a22e6914fd35602cd5676138eac6e9"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">arb_lost</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t8arb_lostE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Arbitration lost error (lost arbitration during transmission) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t7bit_errE">
<span id="_CPPv3N18twai_error_flags_t7bit_errE"></span><span id="_CPPv2N18twai_error_flags_t7bit_errE"></span><span id="twai_error_flags_t::bit_err__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1a957ea6b9a127c0d155730365708fde57"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bit_err</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t7bit_errE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Bit error detected (dominant/recessive mismatch during transmission) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t8form_errE">
<span id="_CPPv3N18twai_error_flags_t8form_errE"></span><span id="_CPPv2N18twai_error_flags_t8form_errE"></span><span id="twai_error_flags_t::form_err__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1aab89443f3f754ab0c838900c5c8351a2"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">form_err</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t8form_errE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Form error detected (frame fixed-form bit violation) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t9stuff_errE">
<span id="_CPPv3N18twai_error_flags_t9stuff_errE"></span><span id="_CPPv2N18twai_error_flags_t9stuff_errE"></span><span id="twai_error_flags_t::stuff_err__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1aa45ea02a0c62b42fb3d8d183b1f1585d"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stuff_err</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t9stuff_errE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Stuff error detected (e.g. dominant error frame received) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t7ack_errE">
<span id="_CPPv3N18twai_error_flags_t7ack_errE"></span><span id="_CPPv2N18twai_error_flags_t7ack_errE"></span><span id="twai_error_flags_t::ack_err__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1a886002ffbb4f9468b6727b805ef69a07"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ack_err</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t7ack_errE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>ACK error (no ack), transmission without acknowledge received </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp">
<span class="target" id="uniontwai__error__flags__t_1ac76a85544415ff4587df3edb62179140"></span><span class="sig-name descname"><span class="pre">struct</span> <span class="pre">twai_error_flags_t</span></span></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_flags_t3valE">
<span id="_CPPv3N18twai_error_flags_t3valE"></span><span id="_CPPv2N18twai_error_flags_t3valE"></span><span id="twai_error_flags_t::val__uint32_t"></span><span class="target" id="uniontwai__error__flags__t_1a317cf7079a668ca1d4891a8a2364754b"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">val</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_flags_t3valE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Integrated error flags </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="id7">
<h3><a class="toc-backref" href="#id39" role="doc-backlink">Structures</a><a class="headerlink" href="#id7" title="Permalink to this heading">ï</a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv420twai_timing_config_t">
<span id="_CPPv320twai_timing_config_t"></span><span id="_CPPv220twai_timing_config_t"></span><span id="twai_timing_config_t"></span><span class="target" id="structtwai__timing__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_timing_config_t</span></span></span><a class="headerlink" href="#_CPPv420twai_timing_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI bitrate timing config advanced mode. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting one of <code class="docutils literal notranslate"><span class="pre">quanta_resolution_hz</span></code> and <code class="docutils literal notranslate"><span class="pre">brp</span></code> is enough, otherwise, <code class="docutils literal notranslate"><span class="pre">brp</span></code> is not used. </p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t7clk_srcE">
<span id="_CPPv3N20twai_timing_config_t7clk_srcE"></span><span id="_CPPv2N20twai_timing_config_t7clk_srcE"></span><span id="twai_timing_config_t::clk_src__twai_clock_source_t"></span><span class="target" id="structtwai__timing__config__t_1a14a1a87f9bb233a328e1d376f1483ddc"></span><a class="reference internal" href="#_CPPv419twai_clock_source_t" title="twai_clock_source_t"><span class="n"><span class="pre">twai_clock_source_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">clk_src</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t7clk_srcE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Optional, clock source, remain 0 to using TWAI_CLK_SRC_DEFAULT by default </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t20quanta_resolution_hzE">
<span id="_CPPv3N20twai_timing_config_t20quanta_resolution_hzE"></span><span id="_CPPv2N20twai_timing_config_t20quanta_resolution_hzE"></span><span id="twai_timing_config_t::quanta_resolution_hz__uint32_t"></span><span class="target" id="structtwai__timing__config__t_1a54254ca0c914649069bb0b77e56aa085"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">quanta_resolution_hz</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t20quanta_resolution_hzE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>The resolution of one timing quanta, in Hz. If setting, brp will be ignored </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t3brpE">
<span id="_CPPv3N20twai_timing_config_t3brpE"></span><span id="_CPPv2N20twai_timing_config_t3brpE"></span><span id="twai_timing_config_t::brp__uint32_t"></span><span class="target" id="structtwai__timing__config__t_1a969f1dbe0d68316f83325fefa0b3831c"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">brp</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t3brpE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Bit rate pre-divider, clock_source_freq / brp = quanta_resolution_hz </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t8prop_segE">
<span id="_CPPv3N20twai_timing_config_t8prop_segE"></span><span id="_CPPv2N20twai_timing_config_t8prop_segE"></span><span id="twai_timing_config_t::prop_seg__uint8_t"></span><span class="target" id="structtwai__timing__config__t_1a8972e0663be21db050631a28a2610bda"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">prop_seg</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t8prop_segE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Prop_seg length, in quanta time </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t6tseg_1E">
<span id="_CPPv3N20twai_timing_config_t6tseg_1E"></span><span id="_CPPv2N20twai_timing_config_t6tseg_1E"></span><span id="twai_timing_config_t::tseg_1__uint8_t"></span><span class="target" id="structtwai__timing__config__t_1ab73bb29cb598da219b274133c5b73ab9"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tseg_1</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t6tseg_1E" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Seg_1 length, in quanta time </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t6tseg_2E">
<span id="_CPPv3N20twai_timing_config_t6tseg_2E"></span><span id="_CPPv2N20twai_timing_config_t6tseg_2E"></span><span id="twai_timing_config_t::tseg_2__uint8_t"></span><span class="target" id="structtwai__timing__config__t_1a45047c38e3d03a65847047afab79a3ae"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tseg_2</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t6tseg_2E" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Seg_2 length, in quanta time </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t3sjwE">
<span id="_CPPv3N20twai_timing_config_t3sjwE"></span><span id="_CPPv2N20twai_timing_config_t3sjwE"></span><span id="twai_timing_config_t::sjw__uint8_t"></span><span class="target" id="structtwai__timing__config__t_1a4816ea53d70f7030a11219b0cb8befbb"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sjw</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t3sjwE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Sync jump width, in quanta time </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t10ssp_offsetE">
<span id="_CPPv3N20twai_timing_config_t10ssp_offsetE"></span><span id="_CPPv2N20twai_timing_config_t10ssp_offsetE"></span><span id="twai_timing_config_t::ssp_offset__uint8_t"></span><span class="target" id="structtwai__timing__config__t_1a43d07821e9d037468f79cc347fb8f0a7"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ssp_offset</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t10ssp_offsetE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Secondary sample point offset refet to Sync seg, in quanta time, set 0 to disable ssp </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N20twai_timing_config_t15triple_samplingE">
<span id="_CPPv3N20twai_timing_config_t15triple_samplingE"></span><span id="_CPPv2N20twai_timing_config_t15triple_samplingE"></span><span id="twai_timing_config_t::triple_sampling__b"></span><span class="target" id="structtwai__timing__config__t_1ad75205adb4bdcfe278caf042dcd9b2ed"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">triple_sampling</span></span></span><a class="headerlink" href="#_CPPv4N20twai_timing_config_t15triple_samplingE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Deprecated, in favor of <code class="docutils literal notranslate"><span class="pre">ssp_offset</span></code></p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv425twai_mask_filter_config_t">
<span id="_CPPv325twai_mask_filter_config_t"></span><span id="_CPPv225twai_mask_filter_config_t"></span><span id="twai_mask_filter_config_t"></span><span class="target" id="structtwai__mask__filter__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_mask_filter_config_t</span></span></span><a class="headerlink" href="#_CPPv425twai_mask_filter_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Configuration for TWAI mask filter. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t2idE">
<span id="_CPPv3N25twai_mask_filter_config_t2idE"></span><span id="_CPPv2N25twai_mask_filter_config_t2idE"></span><span id="twai_mask_filter_config_t::id__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1aa4d2f01a3540b43e29b386dd0f13d402"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">id</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t2idE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Single base ID for filtering </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t7id_listE">
<span id="_CPPv3N25twai_mask_filter_config_t7id_listE"></span><span id="_CPPv2N25twai_mask_filter_config_t7id_listE"></span><span id="twai_mask_filter_config_t::id_list__uint32_tP"></span><span class="target" id="structtwai__mask__filter__config__t_1a8d588cfebb943d8c14712c4fe9319802"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">id_list</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t7id_listE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Base ID list array for filtering, which share the same <code class="docutils literal notranslate"><span class="pre">mask</span></code></p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t10num_of_idsE">
<span id="_CPPv3N25twai_mask_filter_config_t10num_of_idsE"></span><span id="_CPPv2N25twai_mask_filter_config_t10num_of_idsE"></span><span id="twai_mask_filter_config_t::num_of_ids__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1ac846a135454e51a770af71bad3f7724d"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">num_of_ids</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t10num_of_idsE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>List length of <code class="docutils literal notranslate"><span class="pre">id_list</span></code>, remain empty to using single <code class="docutils literal notranslate"><span class="pre">id</span></code> instead of <code class="docutils literal notranslate"><span class="pre">id_list</span></code></p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t4maskE">
<span id="_CPPv3N25twai_mask_filter_config_t4maskE"></span><span id="_CPPv2N25twai_mask_filter_config_t4maskE"></span><span id="twai_mask_filter_config_t::mask__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1acedd9c97098fda277409f2e330758d1d"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mask</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t4maskE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Mask to determine the matching bits (1 = match bit, 0 = any bit) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t6is_extE">
<span id="_CPPv3N25twai_mask_filter_config_t6is_extE"></span><span id="_CPPv2N25twai_mask_filter_config_t6is_extE"></span><span id="twai_mask_filter_config_t::is_ext__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1acac22aa60901f6fe0613ada81f18badc"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_ext</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t6is_extE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>True for extended ID filtering, false for standard ID </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t10no_classicE">
<span id="_CPPv3N25twai_mask_filter_config_t10no_classicE"></span><span id="_CPPv2N25twai_mask_filter_config_t10no_classicE"></span><span id="twai_mask_filter_config_t::no_classic__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1aaf7801db11e9d1d11b1bfd2c7e832334"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_classic</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t10no_classicE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>If true, Classic TWAI frames are excluded (only TWAI FD allowed) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t5no_fdE">
<span id="_CPPv3N25twai_mask_filter_config_t5no_fdE"></span><span id="_CPPv2N25twai_mask_filter_config_t5no_fdE"></span><span id="twai_mask_filter_config_t::no_fd__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1a07d9b8339edc3356760fa69f06a52c4c"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_fd</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t5no_fdE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>If true, TWAI FD frames are excluded (only Classic TWAI allowed) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N25twai_mask_filter_config_t11dual_filterE">
<span id="_CPPv3N25twai_mask_filter_config_t11dual_filterE"></span><span id="_CPPv2N25twai_mask_filter_config_t11dual_filterE"></span><span id="twai_mask_filter_config_t::dual_filter__uint32_t"></span><span class="target" id="structtwai__mask__filter__config__t_1aba9924e9f0ae45305b5cf112c21c1e48"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dual_filter</span></span></span><a class="headerlink" href="#_CPPv4N25twai_mask_filter_config_t11dual_filterE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Set filter as dual-16bits filter mode, see <code class="docutils literal notranslate"><span class="pre">twai_make_dual_filter()</span></code> for easy config </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv426twai_range_filter_config_t">
<span id="_CPPv326twai_range_filter_config_t"></span><span id="_CPPv226twai_range_filter_config_t"></span><span id="twai_range_filter_config_t"></span><span class="target" id="structtwai__range__filter__config__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_range_filter_config_t</span></span></span><a class="headerlink" href="#_CPPv426twai_range_filter_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Range-based filter configuration structure. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_range_filter_config_t9range_lowE">
<span id="_CPPv3N26twai_range_filter_config_t9range_lowE"></span><span id="_CPPv2N26twai_range_filter_config_t9range_lowE"></span><span id="twai_range_filter_config_t::range_low__uint32_t"></span><span class="target" id="structtwai__range__filter__config__t_1a4fa86d7ad818629ea32e6ebc90da868b"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">range_low</span></span></span><a class="headerlink" href="#_CPPv4N26twai_range_filter_config_t9range_lowE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Lower bound of the filtering range </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_range_filter_config_t10range_highE">
<span id="_CPPv3N26twai_range_filter_config_t10range_highE"></span><span id="_CPPv2N26twai_range_filter_config_t10range_highE"></span><span id="twai_range_filter_config_t::range_high__uint32_t"></span><span class="target" id="structtwai__range__filter__config__t_1a69c739f3a1163e4aef3a5c5c54c3b9b9"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">range_high</span></span></span><a class="headerlink" href="#_CPPv4N26twai_range_filter_config_t10range_highE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Upper bound of the filtering range </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_range_filter_config_t6is_extE">
<span id="_CPPv3N26twai_range_filter_config_t6is_extE"></span><span id="_CPPv2N26twai_range_filter_config_t6is_extE"></span><span id="twai_range_filter_config_t::is_ext__uint32_t"></span><span class="target" id="structtwai__range__filter__config__t_1a319e27ec98cbeddd4db6db22b670cf2c"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_ext</span></span></span><a class="headerlink" href="#_CPPv4N26twai_range_filter_config_t6is_extE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>True for extended ID filtering, false for standard ID </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_range_filter_config_t10no_classicE">
<span id="_CPPv3N26twai_range_filter_config_t10no_classicE"></span><span id="_CPPv2N26twai_range_filter_config_t10no_classicE"></span><span id="twai_range_filter_config_t::no_classic__uint32_t"></span><span class="target" id="structtwai__range__filter__config__t_1a4f3fdd714bf1505c15265a6e24628cc2"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_classic</span></span></span><a class="headerlink" href="#_CPPv4N26twai_range_filter_config_t10no_classicE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>If true, Classic TWAI frames are excluded (only TWAI FD allowed) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N26twai_range_filter_config_t5no_fdE">
<span id="_CPPv3N26twai_range_filter_config_t5no_fdE"></span><span id="_CPPv2N26twai_range_filter_config_t5no_fdE"></span><span id="twai_range_filter_config_t::no_fd__uint32_t"></span><span class="target" id="structtwai__range__filter__config__t_1a77acf7858472feacc90122d2795fb6d0"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_fd</span></span></span><a class="headerlink" href="#_CPPv4N26twai_range_filter_config_t5no_fdE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>If true, TWAI FD frames are excluded (only Classic TWAI allowed) </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv419twai_frame_header_t">
<span id="_CPPv319twai_frame_header_t"></span><span id="_CPPv219twai_frame_header_t"></span><span id="twai_frame_header_t"></span><span class="target" id="structtwai__frame__header__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_frame_header_t</span></span></span><a class="headerlink" href="#_CPPv419twai_frame_header_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI frame header/format struct type. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t2idE">
<span id="_CPPv3N19twai_frame_header_t2idE"></span><span id="_CPPv2N19twai_frame_header_t2idE"></span><span id="twai_frame_header_t::id__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1a33c6a3c4c739fc30b8779e8d782f8517"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">id</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t2idE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>message arbitration identification </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3dlcE">
<span id="_CPPv3N19twai_frame_header_t3dlcE"></span><span id="_CPPv2N19twai_frame_header_t3dlcE"></span><span id="twai_frame_header_t::dlc__uint16_t"></span><span class="target" id="structtwai__frame__header__t_1ae5190c9d447aadf98aef9bb243c08793"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dlc</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3dlcE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>message data length code </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3ideE">
<span id="_CPPv3N19twai_frame_header_t3ideE"></span><span id="_CPPv2N19twai_frame_header_t3ideE"></span><span id="twai_frame_header_t::ide__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1a61cec01fdc21c5039e0cc4a90d3d035d"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ide</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3ideE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Extended Frame Format (29bit ID) </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3rtrE">
<span id="_CPPv3N19twai_frame_header_t3rtrE"></span><span id="_CPPv2N19twai_frame_header_t3rtrE"></span><span id="twai_frame_header_t::rtr__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1aa42722799467bcdb82d1053fe198e564"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rtr</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3rtrE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Message is a Remote Frame </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3fdfE">
<span id="_CPPv3N19twai_frame_header_t3fdfE"></span><span id="_CPPv2N19twai_frame_header_t3fdfE"></span><span id="twai_frame_header_t::fdf__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1a437ad153e9b822c9187d18bd3daf0bb0"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fdf</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3fdfE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Message is FD format, allow max 64 byte of data </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3brsE">
<span id="_CPPv3N19twai_frame_header_t3brsE"></span><span id="_CPPv2N19twai_frame_header_t3brsE"></span><span id="twai_frame_header_t::brs__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1a96da89bce198d452ccf129414f7ba1f5"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">brs</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3brsE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Transmit message with Bit Rate Shift. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t3esiE">
<span id="_CPPv3N19twai_frame_header_t3esiE"></span><span id="_CPPv2N19twai_frame_header_t3esiE"></span><span id="twai_frame_header_t::esi__uint32_t"></span><span class="target" id="structtwai__frame__header__t_1a69bc3a9fca5691d79bc147d0fab5cdd0"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">esi</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t3esiE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Transmit side error indicator for received frame </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t9timestampE">
<span id="_CPPv3N19twai_frame_header_t9timestampE"></span><span id="_CPPv2N19twai_frame_header_t9timestampE"></span><span id="twai_frame_header_t::timestamp__uint64_t"></span><span class="target" id="structtwai__frame__header__t_1a19e4bcf12ec06dc7a5c6eed98a1bad8f"></span><span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timestamp</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t9timestampE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Timestamp for received message </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N19twai_frame_header_t12trigger_timeE">
<span id="_CPPv3N19twai_frame_header_t12trigger_timeE"></span><span id="_CPPv2N19twai_frame_header_t12trigger_timeE"></span><span id="twai_frame_header_t::trigger_time__uint64_t"></span><span class="target" id="structtwai__frame__header__t_1a54546bbb0e631cef80547c34c2206c22"></span><span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">trigger_time</span></span></span><a class="headerlink" href="#_CPPv4N19twai_frame_header_t12trigger_timeE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Trigger time for transmitting message </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="macros">
<h3><a class="toc-backref" href="#id40" role="doc-backlink">Macros</a><a class="headerlink" href="#macros" title="Permalink to this heading">ï</a></h3>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAI_STD_ID_MASK">
<span class="target" id="twai__types_8h_1aeeef00ad1186051a9ffaf47d720cea22"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_STD_ID_MASK</span></span></span><a class="headerlink" href="#c.TWAI_STD_ID_MASK" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Mask of the ID fields in a standard frame </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAI_EXT_ID_MASK">
<span class="target" id="twai__types_8h_1a17e92a124620c318975ce4016044c127"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_EXT_ID_MASK</span></span></span><a class="headerlink" href="#c.TWAI_EXT_ID_MASK" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Mask of the ID fields in an extended frame </p>
</dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAI_FRAME_MAX_DLC">
<span class="target" id="twai__types_8h_1a93083e2d6dd282430f463ddf3a80dca9"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_FRAME_MAX_DLC</span></span></span><a class="headerlink" href="#c.TWAI_FRAME_MAX_DLC" title="Permalink to this definition">ï</a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAI_FRAME_MAX_LEN">
<span class="target" id="twai__types_8h_1a849fddfc56adacbe2509f01559c0c5f2"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_FRAME_MAX_LEN</span></span></span><a class="headerlink" href="#c.TWAI_FRAME_MAX_LEN" title="Permalink to this definition">ï</a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAIFD_FRAME_MAX_DLC">
<span class="target" id="twai__types_8h_1a293a07f78472b800f221ec67e3442ca9"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAIFD_FRAME_MAX_DLC</span></span></span><a class="headerlink" href="#c.TWAIFD_FRAME_MAX_DLC" title="Permalink to this definition">ï</a><br /></dt>
<dd></dd></dl>

<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.TWAIFD_FRAME_MAX_LEN">
<span class="target" id="twai__types_8h_1abb4d29de1694362e63174eb209a95d07"></span><span class="sig-name descname"><span class="n"><span class="pre">TWAIFD_FRAME_MAX_LEN</span></span></span><a class="headerlink" href="#c.TWAIFD_FRAME_MAX_LEN" title="Permalink to this definition">ï</a><br /></dt>
<dd></dd></dl>

</section>
<section id="id8">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">Type Definitions</a><a class="headerlink" href="#id8" title="Permalink to this heading">ï</a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv419twai_clock_source_t">
<span id="_CPPv319twai_clock_source_t"></span><span id="_CPPv219twai_clock_source_t"></span><span id="twai_clock_source_t"></span><span class="target" id="twai__types_8h_1a5b6d5db86e261ae648947a2235c9c699"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="clk_tree.html#_CPPv425soc_periph_twai_clk_src_t" title="soc_periph_twai_clk_src_t"><span class="n"><span class="pre">soc_periph_twai_clk_src_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_clock_source_t</span></span></span><a class="headerlink" href="#_CPPv419twai_clock_source_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI group clock source. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>User should select the clock source based on the power and resolution requirement </p>
</div>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv429twai_timing_advanced_config_t">
<span id="_CPPv329twai_timing_advanced_config_t"></span><span id="_CPPv229twai_timing_advanced_config_t"></span><span id="twai_timing_advanced_config_t"></span><span class="target" id="twai__types_8h_1a78a638c346be0fe59820f4e65db48984"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv420twai_timing_config_t" title="twai_timing_config_t"><span class="n"><span class="pre">twai_timing_config_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_timing_advanced_config_t</span></span></span><a class="headerlink" href="#_CPPv429twai_timing_advanced_config_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI bitrate timing config advanced mode for esp_driver_twai. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">quanta_resolution_hz</span></code> is not supported in this driver </p>
</div>
</dd></dl>

</section>
<section id="enumerations">
<h3><a class="toc-backref" href="#id42" role="doc-backlink">Enumerations</a><a class="headerlink" href="#enumerations" title="Permalink to this heading">ï</a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv418twai_error_state_t">
<span id="_CPPv318twai_error_state_t"></span><span id="_CPPv218twai_error_state_t"></span><span class="target" id="twai__types_8h_1a7cd6b7ff89864785dc953fce15a97c9f"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">twai_error_state_t</span></span></span><a class="headerlink" href="#_CPPv418twai_error_state_t" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>TWAI node error fsm states. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_state_t17TWAI_ERROR_ACTIVEE">
<span id="_CPPv3N18twai_error_state_t17TWAI_ERROR_ACTIVEE"></span><span id="_CPPv2N18twai_error_state_t17TWAI_ERROR_ACTIVEE"></span><span class="target" id="twai__types_8h_1a7cd6b7ff89864785dc953fce15a97c9fa8c0bfa6353aa3ea75c3a3f7537c47c97"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_ERROR_ACTIVE</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_state_t17TWAI_ERROR_ACTIVEE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Error active state: TEC/REC &lt; 96 </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_state_t18TWAI_ERROR_WARNINGE">
<span id="_CPPv3N18twai_error_state_t18TWAI_ERROR_WARNINGE"></span><span id="_CPPv2N18twai_error_state_t18TWAI_ERROR_WARNINGE"></span><span class="target" id="twai__types_8h_1a7cd6b7ff89864785dc953fce15a97c9faca2b63e9ece688fa3ad871be2d618526"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_ERROR_WARNING</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_state_t18TWAI_ERROR_WARNINGE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Error warning state: TEC/REC &gt;= 96 and &lt; 128 </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_state_t18TWAI_ERROR_PASSIVEE">
<span id="_CPPv3N18twai_error_state_t18TWAI_ERROR_PASSIVEE"></span><span id="_CPPv2N18twai_error_state_t18TWAI_ERROR_PASSIVEE"></span><span class="target" id="twai__types_8h_1a7cd6b7ff89864785dc953fce15a97c9facfeae1438ed77fe1cc23006e3bc5e352"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_ERROR_PASSIVE</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_state_t18TWAI_ERROR_PASSIVEE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Error passive state: TEC/REC &gt;= 128 and &lt; 256 </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N18twai_error_state_t18TWAI_ERROR_BUS_OFFE">
<span id="_CPPv3N18twai_error_state_t18TWAI_ERROR_BUS_OFFE"></span><span id="_CPPv2N18twai_error_state_t18TWAI_ERROR_BUS_OFFE"></span><span class="target" id="twai__types_8h_1a7cd6b7ff89864785dc953fce15a97c9fa3895424d5579871183f1110399a11d00"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TWAI_ERROR_BUS_OFF</span></span></span><a class="headerlink" href="#_CPPv4N18twai_error_state_t18TWAI_ERROR_BUS_OFFE" title="Permalink to this definition">ï</a><br /></dt>
<dd><p>Bus-off state: TEC &gt;= 256 (node offline) </p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
             <div class="articleComments">

<style>
    .expand-feedback-content {
        display: none;
    }
    .click-like-or-dislike {
        background-color: #d3d3d3;
        pointer-events: none;
    }
</style>

<script>
    function submitFeedbackForm(user_likes_document) {
        // Send to GA4 the user reaction
        gtag('event', 'user_reaction', {
            'user_likes_document': user_likes_document
        });

        if (user_likes_document === 1) {
            document.querySelector('.like-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContentLike").style.display = 'block';
        } else {
            document.querySelector('.dislike-btn').classList.add('click-like-or-dislike');
            document.getElementById("expandContent").style.display = 'block';
        }

        document.querySelector('.like-btn').style.pointerEvents = 'none';
        document.querySelector('.dislike-btn').style.pointerEvents = 'none';
    }
</script>

<hr>

<p style="text-align:center"><strong>Was this page helpful?</strong></p>
<p style="text-align:center">
    <button class="like-btn" onclick="submitFeedbackForm(1)">
        <svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
    </button>
    <button class="dislike-btn" onclick="submitFeedbackForm(0)">
        <svg aria-hidden="true" focusable="false" class="" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
            <path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path>
        </svg>
    </button>
</p>

<div class="expand-feedback-content" id="expandContentLike">
    <ul style="text-align:center">
        <li>Thank you! We received your feedback.</li>
        <li>If you have any comments, fill in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Two-Wire Automotive Interface (TWAI) (api-reference/peripherals/twai)&version=esp32 latest (master)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<div class="expand-feedback-content" id="expandContent">
    <ul style="text-align:center">
        <li>We value your feedback.</li>
        <li>Let us know how we can improve this page by filling in <a href='https://www.espressif.com/en/company/documents/documentation_feedback?docId=4287&sections=Two-Wire Automotive Interface (TWAI) (api-reference/peripherals/twai)&version=esp32 latest (master)'>Espressif Documentation Feedback Form</a>.</li>
    </ul>
</div>

<br>


             </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cap_touch_sens.html" class="btn btn-neutral float-left" title="Capacitive Touch Sensor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="uart.html" class="btn btn-neutral float-right" title="Universal Asynchronous Receiver/Transmitter (UART)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016 - 2025, Espressif Systems (Shanghai) Co., Ltd.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>
    <li class="footer-aside">
        <a href="../../esp-idf-en-latest.zip"> Download HTML</a>
    </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>